<!DOCTYPE html><html lang="en-us"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title class="jsx-2818712398">Tech – Tools &amp; Craft – Notion</title><meta name="description" content="How we’re building Notion, block by block." class="jsx-2818712398"/><meta name="twitter:card" content="summary_large_image" class="jsx-2818712398"/><meta name="twitter:site" content="@NotionHQ" class="jsx-2818712398"/><meta name="twitter:title" content="Tech – Tools &amp; Craft – Notion" class="jsx-2818712398"/><meta name="twitter:description" content="How we’re building Notion, block by block." class="jsx-2818712398"/><meta name="twitter:url" content="https://www.notion.so/blog/topic/tech" class="jsx-2818712398"/><meta name="twitter:image" content="https://www.notion.so/front-static/meta/blog-v2.png" class="jsx-2818712398"/><meta property="og:url" content="https://www.notion.so/blog/topic/tech" class="jsx-2818712398"/><meta property="og:title" content="Tech – Tools &amp; Craft – Notion" class="jsx-2818712398"/><meta property="og:description" content="How we’re building Notion, block by block." class="jsx-2818712398"/><meta property="og:image" content="https://www.notion.so/front-static/meta/blog-v2.png" class="jsx-2818712398"/><meta property="og:locale" content="en-US" class="jsx-2818712398"/><meta property="og:site_name" content="Notion" class="jsx-2818712398"/><meta property="og:type" content="website" class="jsx-2818712398"/><link rel="icon" href="/front-static/favicon.ico" class="jsx-2818712398"/><link rel="apple-touch-icon" href="/front-static/logo-ios.png" class="jsx-2818712398"/><meta name="apple-mobile-web-app-capable" content="yes" class="jsx-2818712398"/><meta name="apple-itunes-app" content="1232780281" class="jsx-2818712398"/><meta name="referrer" content="strict-origin" class="jsx-2818712398"/><meta name="theme-color" content="#F9F5F1" class="jsx-2818712398"/><meta name="next-head-count" content="23"/><link rel="preload" href="/_next/static/css/d32035a5e94c821ad88e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d32035a5e94c821ad88e.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-8ed4068f96dc9dbe6c2d.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-c3aa649bbfdf2d5f92a0.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.2cf68ac8b1972a03b3ba.js" as="script"/><link rel="preload" href="/_next/static/chunks/29107295.6045c0a9516464b26d84.js" as="script"/><link rel="preload" href="/_next/static/chunks/e0d0f1b753050c5d917fc63db1008be9d0b449aa.9242e374fd2eca02c1da.js" as="script"/><link rel="preload" href="/_next/static/chunks/a20e14042bf01bb73cc40ad9bd980461497ba4ce.62c56ddeaa9e1128b4e5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-8ce90d6174db80621e41.js" as="script"/><link rel="preload" href="/_next/static/chunks/3df368aa2cf5ff8908bc537c8341a4f4fd69b0dd.cc994fc4e0f0ea6c659a.js" as="script"/><link rel="preload" href="/_next/static/chunks/9208b6df9dc976eb73d2eecfcc27cadd08debe5b.d54c4817eba9f8f1b939.js" as="script"/><link rel="preload" href="/_next/static/chunks/a929b2e45c7fe2a0448d6d6713bdea38db79da6d.8044263e043049507c20.js" as="script"/><link rel="preload" href="/_next/static/chunks/ae1f24238381916de49cc8167386fbc3308154a3.727fb78bb2b83663d772.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/topic/%5Bslug%5D-e9ca31371913aea849e9.js" as="script"/><style id="__jsx-3873244473">.hoverable.jsx-3873244473{display:block;border-radius:3px;padding:4px 8px;-webkit-text-decoration:none;text-decoration:none;}.hoverable.jsx-3873244473:hover,.hoverable.jsx-3873244473:focus-within{background:rgba(0,0,0,0.03);outline:none;}.hoverable.jsx-3873244473:focus,.clickable.jsx-3873244473:active{background:rgba(0,0,0,0.06);outline:none;}.full-width.jsx-3873244473{display:block;width:100%;}.has-action.jsx-3873244473{cursor:pointer;}</style><style id="__jsx-2510538336">.nav-section.jsx-2510538336{padding:8px;min-width:auto;}.nav-section-title.jsx-2510538336{padding:0 8px;margin:8px 0;}.nav-list.jsx-2510538336{list-style:none;}.nav-item.jsx-2510538336{text-align:left;line-height:1.5;}.nav-item-inner.jsx-2510538336{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.nav-item-icon.jsx-2510538336{width:40px;height:40px;margin-left:-3px;margin-right:7px;margin-bottom:3px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}.label.jsx-2510538336{font-weight:500;font-size:15px;white-space:nowrap;}.badge.jsx-2510538336{margin-left:6px;position:relative;top:4px;}.description.jsx-2510538336{margin-top:-2px;display:block;color:rgba(0,0,0,0.6);font-weight:400;font-size:14px;}</style><style id="__jsx-1093639235">.button-link.jsx-1093639235{-webkit-text-decoration:none;text-decoration:none;color:inherit;}.button.jsx-1093639235{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;white-space:nowrap;border-radius:3px;border:0;font-size:14px;line-height:1;font-weight:500;background:transparent;}.button.jsx-1093639235:active,.button.jsx-1093639235:focus{outline:none;}.full-width.jsx-1093639235{display:block;width:100%;}.button-size-m.jsx-1093639235{height:36px;}.button-size-l.jsx-1093639235{height:46px;font-size:17px;}.button-padding-s.jsx-1093639235{padding-left:12px;padding-right:12px;}.button-padding-m.jsx-1093639235{padding-left:24px;padding-right:24px;}.button-padding-l.jsx-1093639235{padding-left:40px;padding-right:40px;}.primary.jsx-1093639235{color:#FFFFFF;background:#e16259;border:1px solid #be5643;box-shadow:0 1px 2px rgba(15,15,15,0.1);}.primary.jsx-1093639235:hover{background:#cf534a;}.primary.jsx-1093639235:active{background:#bf4d45;}.has-refresh.primary.jsx-1093639235{background:#3AA0DA;border:1px solid #308bbf;box-shadow:0 1px 2px rgba(45,156,219,0.1);}.has-refresh.primary.jsx-1093639235:hover{background:#2D96D1;}.has-refresh.primary.jsx-1093639235:active{background:#1D89C7;}.secondary.jsx-1093639235{color:#EB5757;background:#fdf5f2;box-shadow:0px 1px 2px rgba(15,15,15,0.1), inset 0 0 0 1px rgba(235,87,87,0.3);}.secondary.jsx-1093639235:hover{background:#fbebe8;}.secondary.jsx-1093639235:active{background:#f9e5e2;}.has-refresh.secondary.jsx-1093639235{color:#111111;background:#fff;box-shadow:0px 1px 2px rgba(0,0,0,0.1), inset 0 0 0 1px rgba(0,0,0,0.2);}.has-refresh.secondary.jsx-1093639235:hover{background:#fafafa;}.has-refresh.secondary.jsx-1093639235:active{background:#f1f1f1;}.tertiary.jsx-1093639235{color:#040404;background:transparent;border:1px solid rgba(0, 0, 0, 0.1);}.tertiary.jsx-1093639235:hover{background:rgba(55,53,47,0.08);}.tertiary.jsx-1093639235:active{background:rgba(55,53,47,0.16);}.simple.jsx-1093639235{font-weight:inherit;color:inherit;-webkit-transition:background 150ms;transition:background 150ms;height:auto;padding:6px;}.simple.jsx-1093639235:hover{background:rgba(0,0,0,0.03);}.simple.jsx-1093639235:hover,.simple.jsx-1093639235:focus-within{background:rgba(0,0,0,0.06);outline:none;}.has-arrow-right.jsx-1093639235::after,.has-arrow-down.jsx-1093639235::after{display:inline-block;-webkit-text-decoration:none;text-decoration:none;margin-left:0.25em;}.has-arrow-right.jsx-1093639235::after{content:" →";}.has-arrow-down.jsx-1093639235::after{content:" ↓";}.has-arrow-up.jsx-1093639235::after{content:" ↑";}.has-arrow-left.jsx-1093639235::before{content:"← ";margin-left:0;margin-right:0.25em;}</style><style id="__jsx-972030965">.button-inner.jsx-972030965{line-height:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.download-icon.jsx-972030965{margin-right:0.5em;margin-bottom:-1px;}</style><style id="__jsx-3074128458">.menu.jsx-3074128458{width:260px;}.download.jsx-3074128458{padding:2px 16px 16px;}.button-inner.jsx-3074128458{line-height:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.download-icon.jsx-3074128458{margin-bottom:-1px;margin-right:6px;}.download-microcopy.jsx-3074128458{font-weight:400;font-size:14px;margin-top:4px;color:rgba(0,0,0,0.4);}</style><style id="__jsx-4065748149">.hoverable.jsx-4065748149{display:block;border-radius:3px;padding:0px 0px;-webkit-text-decoration:none;text-decoration:none;}.hoverable.jsx-4065748149:hover,.hoverable.jsx-4065748149:focus-within{background:rgba(0,0,0,0.03);outline:none;}.hoverable.jsx-4065748149:focus,.clickable.jsx-4065748149:active{background:rgba(0,0,0,0.06);outline:none;}.full-width.jsx-4065748149{display:block;width:100%;}.has-action.jsx-4065748149{cursor:pointer;}</style><style id="__jsx-2937511576">.nav-item.jsx-2937511576{font-weight:500;font-size:15px;position:relative;}.label.jsx-2937511576{display:block;padding:0 10px;height:30px;line-height:31px;}.has-menu.jsx-2937511576 .label.jsx-2937511576{padding-right:24px;}.has-menu.jsx-2937511576 .label.jsx-2937511576::after{content:"";display:block;width:8px;height:6px;background:url(/front-static/shared/icons/nav-caret.svg);position:absolute;top:50%;margin-top:-3px;right:10px;}.popup.jsx-2937511576{box-shadow:0 6px 20px rgba(84, 70, 35, 0.3), 0 0 1px rgba(84, 70, 35, 0.5);border-radius:3px;background:#fff;position:absolute;left:0;top:100%;text-align:left;z-index:1000;visibility:hidden;visibility:0;opacity:0;-webkit-transform:scale(0.97);-ms-transform:scale(0.97);transform:scale(0.97);-webkit-transition:visibility 0s,opacity 150ms ease,-webkit-transform 150ms ease;-webkit-transition:visibility 0s,opacity 150ms ease,transform 150ms ease;transition:visibility 0s,opacity 150ms ease,transform 150ms ease;-webkit-transform-origin:top left;-ms-transform-origin:top left;transform-origin:top left;}.nav-item.jsx-2937511576:hover .popup.jsx-2937511576,.nav-item.jsx-2937511576:focus-within .popup.jsx-2937511576{visibility:visible;opacity:1;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}.has-menu.jsx-2937511576:hover .label.jsx-2937511576::after{-webkit-transform:rotate(-180deg);-ms-transform:rotate(-180deg);transform:rotate(-180deg);}@media (prefers-reduced-motion){.popup.jsx-2937511576{-webkit-transition:none;transition:none;}}</style><style id="__jsx-2079032072">.smallcaps.jsx-2079032072{display:block;color:rgba(0,0,0,0.4);text-transform:uppercase;font-size:11px;line-height:1;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;font-weight:500;}</style><style id="__jsx-3431019220">.nav-section.jsx-3431019220{padding:8px;min-width:300px;}.nav-section-title.jsx-3431019220{padding:0 8px;margin:8px 0;}.nav-list.jsx-3431019220{list-style:none;}.nav-item.jsx-3431019220{text-align:left;line-height:1.5;}.nav-item-inner.jsx-3431019220{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.nav-item-icon.jsx-3431019220{width:40px;height:40px;margin-left:-3px;margin-right:7px;margin-bottom:3px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}.label.jsx-3431019220{font-weight:500;font-size:15px;white-space:nowrap;}.badge.jsx-3431019220{margin-left:6px;position:relative;top:4px;}.description.jsx-3431019220{margin-top:-2px;display:block;color:rgba(0,0,0,0.6);font-weight:400;font-size:14px;}</style><style id="__jsx-590778654">.nav-section.jsx-590778654{padding:8px;min-width:180px;}.nav-section-title.jsx-590778654{padding:0 8px;margin:8px 0;}.nav-list.jsx-590778654{list-style:none;}.nav-item.jsx-590778654{text-align:left;line-height:1.5;}.nav-item-inner.jsx-590778654{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.nav-item-icon.jsx-590778654{width:40px;height:40px;margin-left:-3px;margin-right:7px;margin-bottom:3px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}.label.jsx-590778654{font-weight:500;font-size:15px;white-space:nowrap;}.badge.jsx-590778654{margin-left:6px;position:relative;top:4px;}.description.jsx-590778654{margin-top:-2px;display:block;color:rgba(0,0,0,0.6);font-weight:400;font-size:14px;}</style><style id="__jsx-1504650795">.menu.jsx-1504650795{width:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.menu-section.jsx-1504650795:not(:first-child){border-left:1px solid rgba(0, 0, 0, 0.1);}</style><style id="__jsx-59436117">.badge.jsx-59436117{border-radius:3px;display:inline;font-size:9px;font-weight:400;-webkit-letter-spacing:0.1em;-moz-letter-spacing:0.1em;-ms-letter-spacing:0.1em;letter-spacing:0.1em;padding:2px 3px 2px 4px;text-transform:uppercase;vertical-align:text-top;white-space:nowrap;}.badge-primary.jsx-59436117{background:#EB5757;color:#FFFFFF;}.badge-muted.jsx-59436117{background:rgba(55,53,47,0.08);color:rgba(0,0,0,0.6);font-weight:500;}</style><style id="__jsx-184387045">.menu.jsx-184387045{min-width:180px;}</style><style id="__jsx-465518560">.nav-list.jsx-465518560{list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;}</style><style id="__jsx-1141925114">.nav-right.jsx-1141925114{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}.divider.jsx-1141925114{width:1px;background:rgba(0, 0, 0, 0.1);height:20px;margin:0 10px;}.nav-list.jsx-1141925114{list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;}.cta-item.jsx-1141925114{padding-left:10px;}</style><style id="__jsx-2541503075">.nav.jsx-2541503075{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:space-between;-webkit-justify-content:space-between;-ms-flex-pack:space-between;justify-content:space-between;width:100%;height:100%;}</style><style id="__jsx-663081070">.menu-toggle.jsx-663081070{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;width:36px;height:36px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border:0;background:0;outline:none;}</style><style id="__jsx-1551407306">.global-limit{width:100%;margin:0 auto;}.global-limit-s{max-width:620px;}.global-limit-m{max-width:940px;}.global-limit-l{max-width:1260px;}</style><style id="__jsx-3608550700">.nav-section.jsx-3608550700{margin:20px 0;}.nav-section-title.jsx-3608550700{margin:20px 0 10px;}.nav-list.jsx-3608550700{list-style:none;padding:0 0 4px 0;margin:0;}.nav-item.jsx-3608550700{margin:0;padding:0;}.nav-item.jsx-3608550700 a.jsx-3608550700{display:block;padding:4px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;white-space:nowrap;-webkit-text-decoration:none;text-decoration:none;}.label.jsx-3608550700{font-weight:400;font-size:17px;}.badge.jsx-3608550700{margin-left:6px;position:relative;top:4px;}</style><style id="__jsx-1554555621">.download-wrap.jsx-1554555621{margin-bottom:30px;}</style><style id="__jsx-2327381163">.section.jsx-2327381163{border-bottom:1px solid rgba(0, 0, 0, 0.1);}.section-label-link.jsx-2327381163{-webkit-text-decoration:none;text-decoration:none;}.section-label.jsx-2327381163{display:block;-webkit-text-decoration:none;text-decoration:none;font-size:17px;font-weight:700;height:60px;line-height:60px;cursor:pointer;position:relative;background:none;border:0;padding:0;width:100%;text-align:left;}.has-menu.jsx-2327381163 .section-label.jsx-2327381163::after{content:"";display:block;width:12px;height:8px;background:url(/front-static/shared/icons/mobile-nav-caret.svg);position:absolute;top:50%;margin-top:-4px;right:3px;-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transition:-webkit-transform 250ms;-webkit-transition:transform 250ms;transition:transform 250ms;}.is-open.jsx-2327381163 .section-label.jsx-2327381163::after{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}.menu-drawer.jsx-2327381163{margin-top:-20px;}</style><style id="__jsx-735581397">.mobile-nav.jsx-735581397{position:fixed;top:59px;left:0;width:100vw;height:calc(100vh - 59px);display:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;z-index:200;background:#FFFEFC;padding-bottom:40px;}.mobile-nav-inner.jsx-735581397{height:calc(100vh - 59px);}.mobile-nav-inner.jsx-735581397::before{content:"";display:block;margin:0 20px;height:1px;background:rgba(0, 0, 0, 0.1);}.mobile-nav-scrollable.jsx-735581397{overflow-y:auto;height:calc(100vh - 59px);padding:0 20px;padding-bottom:140px;}.is-open.jsx-735581397{display:block;}.actions.jsx-735581397{padding-top:26px;display:grid;grid-gap:16px;}</style><style id="__jsx-1797983899">.header.jsx-1797983899{position:fixed;top:0;left:0;width:100%;background:#FFFEFC;z-index:100;}.outer.jsx-1797983899{padding:0 20px;}.inner.jsx-1797983899{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-transition:250ms height;transition:250ms height;height:60px;border-bottom:1px solid transparent;}.is-scrolled.jsx-1797983899 .inner.jsx-1797983899{height:60px;border-bottom:1px solid rgba(0, 0, 0, 0.1);}.logo-wrap.jsx-1797983899{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.logo.jsx-1797983899{display:block;height:30px;margin-top:-1px;}.spacer.jsx-1797983899{width:100%;height:60px;}.desktop-actions.jsx-1797983899{display:none;}.mobile-actions.jsx-1797983899{margin-right:-10px;}@media screen and (min-width:1020px){.inner.jsx-1797983899{height:80px;}.spacer.jsx-1797983899{height:80px;}.spacer.has-notification.jsx-1797983899{height:140px;}.desktop-actions.jsx-1797983899{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin-left:20px;}.mobile-actions.jsx-1797983899{display:none;}}</style><style id="__jsx-854845302">.smart-break.jsx-854845302{display:block;}@media screen and (min-width:1020px){.smart-break.jsx-854845302{display:none;}}</style><style id="__jsx-3091337728">.popup-trigger.jsx-3091337728{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}</style><style id="__jsx-1783187936">.emoji.jsx-1783187936{font-size:18px;line-height:0;position:relative;top:1px;margin-right:3px;color:#000;}.subscribe-link.jsx-1783187936{cursor:pointer;color:rgba(0,0,0,0.6);}.subscribe-link.jsx-1783187936:hover{color:#EB5757;}.newsletter-description.jsx-1783187936{font-size:15px;color:rgba(0,0,0,0.6);margin-bottom:12px;max-width:260px;}</style><style id="__jsx-200468401">.only-desktop.jsx-200468401{display:none;}@media screen and (min-width:1020px){.only-desktop.jsx-200468401{display:block;width:100%;}}</style><style id="__jsx-3202009909">.logo.jsx-3202009909{margin:0;padding:0;}.description.jsx-3202009909{font-size:15px;color:rgba(0,0,0,0.6);margin-top:10px;max-width:300px;}.topics.jsx-3202009909:before,.topics.jsx-3202009909:after{content:"";display:block;width:100%;height:1px;background:rgba(0, 0, 0, 0.1);}.topics.jsx-3202009909:after{display:none;}.topics.jsx-3202009909{margin:30px 0;}.link-list.jsx-3202009909{margin:0 -10px;padding:10px 0;overflow-x:auto;overflow-y:hidden;}.link-list.jsx-3202009909 li.jsx-3202009909{display:inline;margin:0 10px;list-style:none;line-height:30px;font-size:15px;white-space:nowrap;}.link-list.jsx-3202009909 a.jsx-3202009909{color:rgba(0,0,0,0.6);-webkit-text-decoration:none;text-decoration:none;}.link-list.jsx-3202009909 a.jsx-3202009909:hover{color:#EB5757;}.link-list.jsx-3202009909 li.is-active.jsx-3202009909 a.jsx-3202009909{font-weight:500;color:#040404;}@media screen and (min-width:1020px){.description.jsx-3202009909{max-width:200px;font-size:14px;}.topics.jsx-3202009909:before,.topics.jsx-3202009909:after{display:block;width:60px;}.link-list.jsx-3202009909{padding:1em 0;margin:0;}.link-list.jsx-3202009909 li.jsx-3202009909{display:block;margin:0;}.topics.jsx-3202009909{margin:30px 0 0;}}</style><style id="__jsx-2707934915">.header.jsx-2707934915{text-align:center;padding:10px 0 30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.topic.jsx-2707934915{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.topic-image.jsx-2707934915{width:80px;margin-right:20px;}.topic-title.jsx-2707934915{display:inline;font-weight:500;color:#040404;font-size:15px;}.topic-text.jsx-2707934915{width:280px;padding-bottom:10px;color:rgba(0,0,0,0.6);font-size:15px;margin:6px auto 0;}@media screen and (min-width:1020px){.topic.jsx-2707934915{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.topic-image.jsx-2707934915{width:100px;margin-right:20px;}.header.jsx-2707934915{padding:0;height:194px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.inner.jsx-2707934915{padding-bottom:15px;}}@media screen and (min-width:1020px){.header.jsx-2707934915{height:200px;}.header-inner.jsx-2707934915{padding-bottom:20px;}}</style><style id="__jsx-4080379949">.spacer.jsx-4080379949{height:10px;width:100%;}</style><style id="__jsx-3018435884">.thumbnail.jsx-3018435884{position:relative;border-radius:6px;overflow:hidden;}.thumbnail-cover.jsx-3018435884{position:absolute;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-radius:6px;border:1px solid rgba(0, 0, 0, 0.1);-webkit-transition:background 150ms;transition:background 150ms;background:rgba(0,0,0,0);z-index:2;}.thumbnail.jsx-3018435884:hover .thumbnail-cover.jsx-3018435884{background:rgba(0,0,0,0.05);}</style><style id="__jsx-344305512">.spacer.jsx-344305512{height:15px;width:100%;}</style><style id="__jsx-826300713">.inline-link.jsx-826300713{color:inherit;-webkit-text-decoration:underline;text-decoration:underline;text-underline-offset:0.1875em;cursor:pointer;}.inline-link.jsx-826300713:hover{color:#EB5757;-webkit-text-decoration:none;text-decoration:none;}.has-arrow-right.jsx-826300713::after,.has-arrow-down.jsx-826300713::after{display:inline-block;-webkit-text-decoration:none;text-decoration:none;}.has-arrow-right.jsx-826300713::after{content:" →";}.has-arrow-down.jsx-826300713::after{content:" ↓";}.has-arrow-up.jsx-826300713::after{content:" ↑";}.has-arrow-left.jsx-826300713::before{content:"← ";}.disable-underline.jsx-826300713{-webkit-text-decoration:none;text-decoration:none;}.underline-border.jsx-826300713{-webkit-text-decoration-color:rgba(0, 0, 0, 0.1);text-decoration-color:rgba(0, 0, 0, 0.1);}.underline-light.jsx-826300713{-webkit-text-decoration-color:rgba(0,0,0,0.4);text-decoration-color:rgba(0,0,0,0.4);}.underline-red.jsx-826300713{-webkit-text-decoration-color:#EB5757;text-decoration-color:#EB5757;}</style><style id="__jsx-645121531">.global-title{margin-top:0;margin-bottom:0;font-family:inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";font-weight:700;color:#111111;}.global-font-weight-bold{font-weight:700;}.global-font-weight-regular{font-weight:400;}.global-title-color-light{color:rgba(0,0,0,0.4);}.global-title-color-medium{color:rgba(0,0,0,0.6);}.global-title-color-dark{color:#111111;}.global-title-size-xs{font-size:20px;line-height:1.3;-webkit-letter-spacing:normal;-moz-letter-spacing:normal;-ms-letter-spacing:normal;letter-spacing:normal;}.global-title-size-s{font-size:22px;line-height:1.3;-webkit-letter-spacing:normal;-moz-letter-spacing:normal;-ms-letter-spacing:normal;letter-spacing:normal;}.global-title-size-m{font-size:22px;line-height:1.3;-webkit-letter-spacing:normal;-moz-letter-spacing:normal;-ms-letter-spacing:normal;letter-spacing:normal;}@media screen and (min-width:600px){.global-title-size-m{font-size:30px;line-height:1.3;-webkit-letter-spacing:normal;-moz-letter-spacing:normal;-ms-letter-spacing:normal;letter-spacing:normal;}}.global-title-size-l{font-size:30px;line-height:1.3;-webkit-letter-spacing:normal;-moz-letter-spacing:normal;-ms-letter-spacing:normal;letter-spacing:normal;}@media screen and (min-width:600px){.global-title-size-l{font-size:38px;line-height:1.2;-webkit-letter-spacing:-0.005em;-moz-letter-spacing:-0.005em;-ms-letter-spacing:-0.005em;letter-spacing:-0.005em;}}.global-title-size-xl{font-size:38px;line-height:1.2;-webkit-letter-spacing:-0.005em;-moz-letter-spacing:-0.005em;-ms-letter-spacing:-0.005em;letter-spacing:-0.005em;}@media screen and (min-width:600px){.global-title-size-xl{font-size:50px;line-height:1.2;-webkit-letter-spacing:-0.025em;-moz-letter-spacing:-0.025em;-ms-letter-spacing:-0.025em;letter-spacing:-0.025em;}}.global-title-size-xxl{font-size:50px;line-height:1.05;-webkit-letter-spacing:-0.025em;-moz-letter-spacing:-0.025em;-ms-letter-spacing:-0.025em;letter-spacing:-0.025em;}@media screen and (min-width:600px){.global-title-size-xxl{font-size:74px;line-height:1.1;-webkit-letter-spacing:-0.025em;-moz-letter-spacing:-0.025em;-ms-letter-spacing:-0.025em;letter-spacing:-0.025em;}}</style><style id="__jsx-2777104501">.person.jsx-2777104501{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#FFFEFC;}.person-image.jsx-2777104501{width:60px;height:60px;margin-right:3px;mix-blend-mode:multiply;}.person-image.is-small.jsx-2777104501{width:48px;height:48px;}.person-text.jsx-2777104501{font-family:inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";font-size:14px;margin-left:2px;padding-bottom:2px;}.person-name.jsx-2777104501{color:#111111;}.person-title.jsx-2777104501{color:rgba(0,0,0,0.6);}.person-link.jsx-2777104501{color:#EB5757;}</style><style id="__jsx-2486084440">.subtitle.jsx-2486084440{font-size:15px;color:rgba(0,0,0,0.6);-webkit-text-decoration:none;text-decoration:none;}.subtitle.jsx-2486084440 p.jsx-2486084440{margin:12px 0;}.person.jsx-2486084440{margin-left:-5px;}</style><style id="__jsx-3136784560">.small-hero.jsx-3136784560{display:block;}.large-hero.jsx-3136784560{display:none;}.small-hero.jsx-3136784560,.large-hero.jsx-3136784560{margin-bottom:40px;}.posts-grid.jsx-3136784560{display:grid;grid-template-columns:1fr;grid-gap:40px;}@media screen and (min-width:800px){.small-hero.jsx-3136784560{display:none;}.large-hero.jsx-3136784560{display:block;}.posts-grid.jsx-3136784560{display:grid;grid-template-columns:1fr 1fr;grid-gap:40px 60px;}}@media screen and (min-width:1020px){.small-hero.jsx-3136784560,.large-hero.jsx-3136784560{margin-bottom:60px;}}</style><style id="__jsx-96747872">.global-align-center{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;}.global-margin-xs{margin:var(--spacing-xs) 0;}.global-margin-s{margin:var(--spacing-s) 0;}.global-margin-m{margin:var(--spacing-m) 0;}.global-margin-l{margin:var(--spacing-l) 0;}.global-margin-xl{margin:var(--spacing-xl) 0;}.global-padding-xs{padding:var(--spacing-xs) 0;}.global-padding-s{padding:var(--spacing-s) 0;}.global-padding-m{padding:var(--spacing-m) 0;}.global-padding-l{padding:var(--spacing-l) 0;}.global-padding-xl{padding:var(--spacing-xl) 0;}</style><style id="__jsx-1822706595">.global-contain{padding:0 var(--base-padding);}</style><style id="__jsx-3631052264">.label.jsx-3631052264{font-weight:700;font-size:14px;}.list.jsx-3631052264{margin:0;padding:0;font-weight:500;}.list-item.jsx-3631052264{list-style:none;font-size:14px;margin:5px 0;}.action.jsx-3631052264{-webkit-text-decoration:none;text-decoration:none;list-style:none;color:rgba(0,0,0,0.6);cursor:pointer;}.action.jsx-3631052264:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#EB5757;}.badge.jsx-3631052264{display:inline-block;margin-left:0.5em;position:relative;top:2px;}@media screen and (min-width:1020px){.label.jsx-3631052264{font-size:15px;}}</style><style id="__jsx-1526746199">.footer-top.jsx-1526746199{padding:var(--base-padding) 0;border-top:1px solid rgba(0, 0, 0, 0.1);}.columns-wrap.jsx-1526746199{margin-top:var(--base-padding);display:grid;grid-template-columns:repeat(2,1fr);grid-column-gap:20px;grid-row-gap:var(--base-padding);width:100%;}.logo-wrap.jsx-1526746199{padding-top:5px;}@media screen and (min-width:800px){.logo-wrap.jsx-1526746199{padding-top:0;}.links-section.jsx-1526746199{margin-top:0;width:25%;}}@media screen and (min-width:1020px){.footer-top.jsx-1526746199{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.logo-wrap.jsx-1526746199{width:calc(100% / 6);}.columns-wrap.jsx-1526746199{margin-top:0;width:calc(100% / 6 * 5);grid-template-columns:repeat(5,1fr);grid-row-gap:0;}}</style><style id="__jsx-1101827863">.language-picker-wrap.jsx-1101827863{margin-left:-8px;}.trigger.jsx-1101827863{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:30px;padding:2px 8px;border-radius:3px;}.trigger.jsx-1101827863:hover{background:#F9F5F1;}.globe-icon.jsx-1101827863{position:relative;top:1px;margin-right:5px;}.label.jsx-1101827863{position:relative;padding-right:13px;}.label.jsx-1101827863::after{content:"";display:block;width:8px;height:6px;background:url(/front-static/shared/icons/nav-caret.svg);position:absolute;top:50%;margin-top:-3px;right:0;-webkit-transition:-webkit-transform 250ms;-webkit-transition:transform 250ms;transition:transform 250ms;}</style><style id="__jsx-79536284">.status-dot.jsx-79536284{display:inline-block;width:9px;height:9px;border-radius:9px;background:#14d170;margin-left:5px;}.status-dot-green.jsx-79536284{background:#14d170;}.status-dot-yellow.jsx-79536284{background:#ffb800;}.status-dot-red.jsx-79536284{background:#eb5757;}.status-item.jsx-79536284 a.jsx-79536284{-webkit-text-decoration:none;text-decoration:none;}.status-item.jsx-79536284 a.jsx-79536284:hover{color:#EB5757;-webkit-text-decoration:underline;text-decoration:underline;}</style><style id="__jsx-2462007035">.copyright.jsx-2462007035{color:rgba(0,0,0,0.4);font-weight:400;}</style><style id="__jsx-506245689">.social-list.jsx-506245689{list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.social-list.jsx-506245689 li.jsx-506245689{margin-left:5px;color:rgba(0,0,0,0.6);}.social-list.jsx-506245689 li.twitter.jsx-506245689:hover{color:#4a9ae4;}.social-list.jsx-506245689 li.linked-in.jsx-506245689:hover{color:#3071aa;}.social-list.jsx-506245689 li.facebook.jsx-506245689:hover{color:#4267b2;}.social-list.jsx-506245689 li.instagram.jsx-506245689:hover{color:#000000;}.social-list.jsx-506245689 li.youtube.jsx-506245689:hover{color:#ff0000;}</style><style id="__jsx-3062719905">.footer-bottom.jsx-3062719905{border-top:1px solid rgba(0, 0, 0, 0.1);font-size:14px;font-weight:500;}.link-list-mobile.jsx-3062719905{list-style:none;display:grid;grid-template-columns:repeat(2,1fr);grid-row-gap:10px;grid-column-gap:20px;margin:0;padding:0;}.link-list-mobile.jsx-3062719905 li.jsx-3062719905{margin-right:2em;}.link-list-mobile.jsx-3062719905 li.jsx-3062719905:first-child{margin-right:1em;}.link-list-mobile.jsx-3062719905{border-top:1px solid rgba(0, 0, 0, 0.1);padding:20px 0;}.link-list-mobile.jsx-3062719905:first-child{border-top:0;}.link-list.jsx-3062719905{list-style:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;padding:0;}.link-list.jsx-3062719905 li.jsx-3062719905{margin-right:1.75em;}.link-list.jsx-3062719905 li.jsx-3062719905:first-child{margin-right:1em;}.action.jsx-3062719905{-webkit-text-decoration:none;text-decoration:none;list-style:none;cursor:pointer;}.action.jsx-3062719905:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#EB5757;}.footer-bottom-desktop.jsx-3062719905{display:none;}.footer-bottom-mobile.jsx-3062719905{display:block;}.mobile-social.jsx-3062719905{margin-left:-10px;}.mobile-copyright.jsx-3062719905{padding:20px 0;}@media screen and (min-width:1020px){.footer-bottom-desktop.jsx-3062719905{padding:15px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.footer-bottom-mobile.jsx-3062719905{display:none;}}</style><style id="__jsx-2818712398">html,body{background:#FFFEFC;}body{color:#111111;font-family:inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";font-size:17px;line-height:1.5;}a{color:#111111;}</style><style id="__jsx-871024205">@media screen and (min-width:1020px){.wrap.jsx-871024205{display:grid;grid-template-columns:220px auto;grid-gap:var(--base-padding);}.sidebar.jsx-871024205{border-right:1px solid rgba(0, 0, 0, 0.1);}.sticky.jsx-871024205{top:120px;position:-webkit-sticky;position:sticky;}.sticky-inner.jsx-871024205{position:relative;}.sticky.jsx-871024205::after{position:absolute;content:"";display:block;right:-1px;top:-100px;height:100px;width:1px;background:#FFFEFC;}@media screen and (min-width:1380px){.sticky.jsx-871024205{top:140px;}}}</style><style id="__jsx-2756172983">:root{--base-padding:20px;--spacing-xs:20px;--spacing-s:40px;--spacing-m:40px;--spacing-l:60px;--spacing-xl:60px;}@media screen and (min-width:600px){:root{--base-padding:40px;--spacing-l:80px;--spacing-xl:80px;}}@media screen and (min-width:1020px){:root{--base-padding:60px;}}@media screen and (min-width:1380px){:root{--spacing-m:60px;--spacing-l:120px;--spacing-xl:160px;}}</style></head><body><div id="__next"><div><header class="jsx-1797983899 header"><div class="jsx-1797983899 outer"><div class="jsx-1551407306 global-limit global-limit-l"><div class="jsx-1797983899 inner"><div class="jsx-1797983899 logo-wrap"><a class="jsx-1797983899 logo" href="/product"><svg width="87" height="30" viewBox="0 0 87 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.805 1.294l16.6-1.226c2.039-.175 2.563-.057 3.845.875l5.299 3.733c.874.642 1.165.817 1.165 1.516v20.473c0 1.283-.466 2.042-2.097 2.158L7.34 29.99c-1.224.058-1.807-.117-2.448-.934L.99 23.982c-.7-.934-.99-1.633-.99-2.45V3.334c0-1.049.466-1.924 1.805-2.04z" fill="#fff"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M18.405.068l-16.6 1.226C.466 1.41 0 2.285 0 3.334v18.198c0 .817.29 1.516.99 2.45l3.902 5.074c.641.817 1.224.992 2.448.934l19.277-1.167c1.63-.116 2.097-.875 2.097-2.158V6.192c0-.663-.262-.854-1.033-1.42a85.473 85.473 0 01-.133-.096L22.25.943c-1.282-.932-1.806-1.05-3.845-.875zM7.776 5.857c-1.574.106-1.931.13-2.825-.597L2.678 3.452c-.231-.234-.115-.526.467-.584l15.958-1.166c1.34-.117 2.038.35 2.562.758l2.737 1.983c.117.059.408.408.058.408l-16.48.992-.204.014zM5.941 26.49V9.11c0-.759.233-1.109.931-1.168L25.8 6.834c.642-.058.932.35.932 1.108v17.264c0 .759-.117 1.401-1.165 1.459l-18.113 1.05c-1.048.058-1.513-.291-1.513-1.225zm17.88-16.448c.116.525 0 1.05-.525 1.11l-.873.173v12.832c-.758.408-1.456.641-2.039.641-.932 0-1.165-.292-1.863-1.166l-5.709-8.982v8.69l1.806.409s0 1.05-1.457 1.05l-4.017.233c-.117-.234 0-.817.407-.933l1.049-.291v-11.49L9.144 12.2c-.117-.525.174-1.283.99-1.342l4.31-.29 5.94 9.098v-8.049l-1.514-.174c-.117-.643.349-1.11.931-1.167l4.02-.234z" fill="#000"></path><path d="M41.434 21.251v-7.91h.137l5.704 7.91h1.796V9.627h-1.997v7.902h-.137l-5.704-7.902H39.43V21.25h2.005zM54.715 21.429c2.635 0 4.238-1.724 4.238-4.584 0-2.852-1.611-4.584-4.238-4.584-2.618 0-4.237 1.74-4.237 4.584 0 2.86 1.595 4.584 4.237 4.584zm0-1.676c-1.393 0-2.19-1.063-2.19-2.908 0-1.837.797-2.908 2.19-2.908 1.386 0 2.183 1.071 2.183 2.908 0 1.845-.789 2.908-2.183 2.908zM60.778 10.28v2.215h-1.393v1.595h1.393v4.809c0 1.708.806 2.393 2.828 2.393.386 0 .757-.04 1.047-.097v-1.563c-.242.024-.395.04-.677.04-.837 0-1.208-.386-1.208-1.256V14.09h1.885v-1.595h-1.885v-2.216h-1.99zM65.85 21.251h1.99v-8.813h-1.99v8.813zm.991-10.27c.66 0 1.192-.533 1.192-1.201 0-.669-.531-1.209-1.192-1.209-.652 0-1.192.54-1.192 1.209 0 .668.54 1.2 1.192 1.2zM73.299 21.429c2.634 0 4.237-1.724 4.237-4.584 0-2.852-1.611-4.584-4.237-4.584-2.619 0-4.238 1.74-4.238 4.584 0 2.86 1.595 4.584 4.238 4.584zm0-1.676c-1.394 0-2.192-1.063-2.192-2.908 0-1.837.798-2.908 2.192-2.908 1.385 0 2.183 1.071 2.183 2.908 0 1.845-.79 2.908-2.183 2.908zM78.725 21.251h1.998V16.12c0-1.297.75-2.119 1.941-2.119 1.217 0 1.78.677 1.78 2.022v5.228h1.999v-5.703c0-2.103-1.072-3.287-3.037-3.287-1.314 0-2.2.604-2.619 1.587h-.137v-1.41h-1.925v8.813z" fill="#000"></path></svg></a></div><div class="jsx-1797983899 desktop-actions"><nav role="navigation" aria-label="Primary Navigation" class="jsx-2541503075 nav"><div class="jsx-465518560 nav-left"><ul aria-label="submenu" class="jsx-465518560 nav-list"><li aria-expanded="false" class="jsx-2937511576 nav-item has-menu"><div role="button" class="jsx-4065748149 hoverable"><div class="jsx-2937511576 label">Product</div><div class="jsx-2937511576 popup"><div aria-label="Product" class="jsx-3074128458 menu"><div class="jsx-2510538336 nav-section"><ul aria-label="submenu" class="jsx-2510538336 nav-list"><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/product"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">Home</span><span class="jsx-2510538336 description">Docs, projects, &amp; wikis</span></div></div></a></li><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="https://www.notion.so/181e961aeb5c4ee6915307c0dfd5156d"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">Template gallery</span><span class="jsx-2510538336 description">Setups to get you started</span></div></div></a></li><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/customers"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">Customer stories</span><span class="jsx-2510538336 description">See how teams use Notion</span></div></div></a></li></ul></div><div class="jsx-3074128458 download"><a class="jsx-1093639235 button-link" href="/desktop"><button class="jsx-1093639235 button tertiary full-width button-size-m button-padding-s"><span class="jsx-972030965 button-inner"><span class="jsx-972030965 download-icon"><svg viewBox="0 0 23 16" style="width:23px;height:16px;display:inline;fill:inherit;flex-shrink:0" class="appDownload"><path clip-rule="evenodd" d="m23 11.4338c0 2.5317-2.1591 4.5662-4.922 4.5662h-12.59789c-3.12888 0-5.48011-2.2739-5.48011-4.9804 0-2.2463 1.28998-4.10591 3.3576-4.43732.04574-2.57768 2.49761-4.2992 4.74821-3.63637 1.09785-1.61104 2.86359-2.94591 5.34289-2.94591 3.7418 0 6.6786 2.96433 6.6603 7.0702 1.784.75489 2.891 2.43038 2.891 4.3636zm-17.51989 3.084h12.59789c1.9487 0 3.449-1.3717 3.449-3.084 0-1.66625-1.0704-2.89065-2.7354-3.25889-.1098-.02761-.1556-.09206-.1464-.21173.0366-.43269.064-.92981.0366-1.35328-.1555-2.73418-2.2323-5.12774-5.2331-5.12774-2.3695 0-3.73271 1.30725-4.62014 2.89989-.05489.10126-.11893.12888-.22872.09206-1.8755-.6168-3.90652.22094-3.90652 3.05638 0 .11968-.04575.18412-.17383.18412-1.93954 0-3.04654 1.46376-3.04654 3.30499 0 1.878 1.70167 3.4982 4.00716 3.4982zm7.19089-9.49502c0-.39047-.3145-.70701-.7026-.70701-.388 0-.7026.31654-.7026.70701v4.89196l-1.61105-1.62112c-.27439-.27611-.71927-.27611-.99366 0-.2744.27611-.2744.72377 0 .99987l2.81051 2.82811c.2744.2761.7193.2761.9936 0l2.8106-2.82811c.2743-.2761.2743-.72376 0-.99987-.2744-.27611-.7193-.27611-.9937 0l-1.6111 1.62112z" fill-rule="evenodd"></path></svg></span><span class="jsx-972030965 download-text">Download Notion</span></span></button></a><div class="jsx-3074128458 download-microcopy">Mac, Windows, iOS, &amp; Android</div></div></div></div></div></li><li aria-expanded="false" class="jsx-2937511576 nav-item has-menu"><div role="button" class="jsx-4065748149 hoverable"><div class="jsx-2937511576 label">Solutions</div><div class="jsx-2937511576 popup"><div aria-label="Solutions" class="jsx-1504650795 menu"><div class="jsx-1504650795 menu-section"><div class="jsx-3431019220 nav-section"><div class="jsx-3431019220 nav-section-title"><span class="jsx-2079032072 smallcaps">By team size</span></div><ul aria-label="submenu" class="jsx-3431019220 nav-list"><li class="jsx-3431019220 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/enterprise"><div class="jsx-3431019220 nav-item-inner"><div class="jsx-3431019220 nav-item-icon"><div class="loaded--false"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:100%"></div><img alt="Enterprise" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="jsx-3431019220 nav-item-body"><span class="jsx-3431019220 label">Enterprise</span><span class="jsx-3431019220 description">Advanced features for your org</span></div></div></a></li><li class="jsx-3431019220 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/teams"><div class="jsx-3431019220 nav-item-inner"><div class="jsx-3431019220 nav-item-icon"><div class="loaded--false"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:100%"></div><img alt="Small business" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="jsx-3431019220 nav-item-body"><span class="jsx-3431019220 label">Small business</span><span class="jsx-3431019220 description">Run your team on one tool</span></div></div></a></li><li class="jsx-3431019220 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/personal"><div class="jsx-3431019220 nav-item-inner"><div class="jsx-3431019220 nav-item-icon"><div class="loaded--false"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:100%"></div><img alt="Personal" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="jsx-3431019220 nav-item-body"><span class="jsx-3431019220 label">Personal</span><span class="jsx-3431019220 description">Free for individuals</span></div></div></a></li></ul></div></div><div class="jsx-1504650795 menu-section"><div class="jsx-590778654 nav-section"><div class="jsx-590778654 nav-section-title"><span class="jsx-2079032072 smallcaps">By team function</span></div><ul aria-label="submenu" class="jsx-590778654 nav-list"><li class="jsx-590778654 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/product/notion-for-design"><div class="jsx-590778654 nav-item-inner"><div class="jsx-590778654 nav-item-body"><span class="jsx-590778654 label">Design</span></div></div></a></li><li class="jsx-590778654 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/product/notion-for-engineering"><div class="jsx-590778654 nav-item-inner"><div class="jsx-590778654 nav-item-body"><span class="jsx-590778654 label">Engineering</span></div></div></a></li><li class="jsx-590778654 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/product/notion-for-product"><div class="jsx-590778654 nav-item-inner"><div class="jsx-590778654 nav-item-body"><span class="jsx-590778654 label">Product</span></div></div></a></li><li class="jsx-590778654 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/product/notion-for-managers"><div class="jsx-590778654 nav-item-inner"><div class="jsx-590778654 nav-item-body"><span class="jsx-590778654 label">Managers</span></div></div></a></li></ul></div></div><div class="jsx-1504650795 menu-section"><div class="jsx-590778654 nav-section"><div class="jsx-590778654 nav-section-title"><span class="jsx-2079032072 smallcaps">Notion for</span></div><ul aria-label="submenu" class="jsx-590778654 nav-list"><li class="jsx-590778654 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/startups"><div class="jsx-590778654 nav-item-inner"><div class="jsx-590778654 nav-item-body"><span class="jsx-590778654 label">Startups</span></div></div></a></li><li class="jsx-590778654 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/remote"><div class="jsx-590778654 nav-item-inner"><div class="jsx-590778654 nav-item-body"><span class="jsx-590778654 label">Remote work</span></div></div></a></li><li class="jsx-590778654 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/product/notion-for-education"><div class="jsx-590778654 nav-item-inner"><div class="jsx-590778654 nav-item-body"><span class="jsx-590778654 label">Education</span></div></div></a></li><li class="jsx-590778654 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/pages/nonprofits"><div class="jsx-590778654 nav-item-inner"><div class="jsx-590778654 nav-item-body"><span class="jsx-590778654 label">Nonprofits</span></div></div></a></li></ul></div></div></div></div></div></li><li aria-expanded="false" class="jsx-2937511576 nav-item has-menu"><div role="button" class="jsx-4065748149 hoverable"><div class="jsx-2937511576 label">Resources</div><div class="jsx-2937511576 popup"><div aria-label="Resources" class="jsx-184387045 menu"><div class="jsx-2510538336 nav-section"><ul aria-label="submenu" class="jsx-2510538336 nav-list"><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/blog"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">Blog</span></div></div></a></li><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/guides"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">Guides &amp; tutorials</span></div></div></a></li><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="https://www.notion.so/notion/webinars-a04ea211bc504e91ac83a77e74ea9072?utm_medium=owned&amp;utm_source=notion.so&amp;utm_campaign=2021q3_webinar"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">Webinars</span></div></div></a></li><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="https://www.notion.so/help"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">Help center</span></div></div></a></li><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="https://developers.notion.com"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">API docs<span class="jsx-2510538336 badge"><span class="jsx-59436117 badge badge-muted">Beta</span></span></span></div></div></a></li></ul></div></div></div></div></li><li aria-expanded="false" class="jsx-2937511576 nav-item has-menu"><div role="button" class="jsx-4065748149 hoverable"><div class="jsx-2937511576 label">Download</div><div class="jsx-2937511576 popup"><div aria-label="Download" class="jsx-184387045 menu"><div class="jsx-2510538336 nav-section"><ul aria-label="submenu" class="jsx-2510538336 nav-list"><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/mobile"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">iOS &amp; Android</span></div></div></a></li><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/desktop"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">Mac &amp; Windows</span></div></div></a></li><li class="jsx-2510538336 nav-item"><a class="jsx-3873244473 hoverable clickable full-width has-action" href="/web-clipper"><div class="jsx-2510538336 nav-item-inner"><div class="jsx-2510538336 nav-item-body"><span class="jsx-2510538336 label">Web Clipper</span></div></div></a></li></ul></div></div></div></div></li><li aria-expanded="false" class="jsx-2937511576 nav-item"><a class="jsx-4065748149 hoverable clickable has-action" href="/pricing"><div class="jsx-2937511576 label">Pricing</div></a></li></ul></div><div class="jsx-1141925114 nav-right"><ul aria-label="submenu" class="jsx-1141925114 nav-list"><li aria-expanded="false" class="jsx-2937511576 nav-item"><div role="button" class="jsx-4065748149 hoverable clickable has-action"><div class="jsx-2937511576 label">Contact sales</div></div></li></ul><div class="jsx-1141925114 divider"></div><ul aria-label="submenu" class="jsx-1141925114 nav-list"><li aria-expanded="false" class="jsx-2937511576 nav-item"><a class="jsx-4065748149 hoverable clickable has-action" href="/login"><div class="jsx-2937511576 label">Log in</div></a></li><li class="jsx-1141925114 cta-item"><a class="jsx-1093639235 button-link" href="/signup"><button class="jsx-1093639235 button primary button-size-m button-padding-s">Try Notion free</button></a></li></ul></div></nav></div><div class="jsx-1797983899 mobile-actions"><button class="jsx-663081070 menu-toggle"><svg viewBox="0 0 30 30" style="width:22px;height:100%;display:block;fill:inherit;flex-shrink:0" class="menu"><path d="M2,4v2h26V4H2z M2,16h26v-2H2V16z M2,26h26v-2H2V26z"></path></svg></button></div></div></div></div></header><nav class="jsx-735581397 mobile-nav"><div class="jsx-735581397 mobile-nav-inner"><div class="jsx-735581397 mobile-nav-scrollable"><div class="jsx-2327381163 section has-menu is-open"><button class="jsx-2327381163 section-label">Product</button><div class="jsx-2327381163 menu-drawer"><div class="jsx-1554555621 menu"><div class="jsx-3608550700 nav-section"><ul aria-label="submenu" class="jsx-3608550700 nav-list"><li class="jsx-3608550700 nav-item"><a target="_self" class="jsx-3608550700 nav-item" href="/product"><span class="jsx-3608550700 label">Overview</span></a></li><li class="jsx-3608550700 nav-item"><a target="_self" class="jsx-3608550700 nav-item" href="/templates"><span class="jsx-3608550700 label">Template gallery</span></a></li><li class="jsx-3608550700 nav-item"><a target="_self" class="jsx-3608550700 nav-item" href="/customers"><span class="jsx-3608550700 label">Customer stories</span></a></li></ul></div><div class="jsx-1554555621 download-wrap"><a class="jsx-1093639235 button-link" href="/mobile"><button class="jsx-1093639235 button tertiary full-width button-size-l button-padding-s"><span class="jsx-972030965 button-inner"><span class="jsx-972030965 download-icon"><svg viewBox="0 0 23 16" style="width:23px;height:16px;display:inline;fill:inherit;flex-shrink:0" class="appDownload"><path clip-rule="evenodd" d="m23 11.4338c0 2.5317-2.1591 4.5662-4.922 4.5662h-12.59789c-3.12888 0-5.48011-2.2739-5.48011-4.9804 0-2.2463 1.28998-4.10591 3.3576-4.43732.04574-2.57768 2.49761-4.2992 4.74821-3.63637 1.09785-1.61104 2.86359-2.94591 5.34289-2.94591 3.7418 0 6.6786 2.96433 6.6603 7.0702 1.784.75489 2.891 2.43038 2.891 4.3636zm-17.51989 3.084h12.59789c1.9487 0 3.449-1.3717 3.449-3.084 0-1.66625-1.0704-2.89065-2.7354-3.25889-.1098-.02761-.1556-.09206-.1464-.21173.0366-.43269.064-.92981.0366-1.35328-.1555-2.73418-2.2323-5.12774-5.2331-5.12774-2.3695 0-3.73271 1.30725-4.62014 2.89989-.05489.10126-.11893.12888-.22872.09206-1.8755-.6168-3.90652.22094-3.90652 3.05638 0 .11968-.04575.18412-.17383.18412-1.93954 0-3.04654 1.46376-3.04654 3.30499 0 1.878 1.70167 3.4982 4.00716 3.4982zm7.19089-9.49502c0-.39047-.3145-.70701-.7026-.70701-.388 0-.7026.31654-.7026.70701v4.89196l-1.61105-1.62112c-.27439-.27611-.71927-.27611-.99366 0-.2744.27611-.2744.72377 0 .99987l2.81051 2.82811c.2744.2761.7193.2761.9936 0l2.8106-2.82811c.2743-.2761.2743-.72376 0-.99987-.2744-.27611-.7193-.27611-.9937 0l-1.6111 1.62112z" fill-rule="evenodd"></path></svg></span><span class="jsx-972030965 download-text">Download Notion</span></span></button></a></div></div></div></div><div class="jsx-2327381163 section has-menu"><button class="jsx-2327381163 section-label">Solutions</button></div><div class="jsx-2327381163 section has-menu"><button class="jsx-2327381163 section-label">Resources</button></div><div class="jsx-2327381163 section has-menu"><button class="jsx-2327381163 section-label">Download</button></div><div class="jsx-2327381163 section"><a class="jsx-2327381163 section-label-link" href="/pricing"><button class="jsx-2327381163 section-label">Pricing</button></a></div><div class="jsx-2327381163 section"><button class="jsx-2327381163 section-label">Contact sales</button></div><div class="jsx-735581397 actions"><a class="jsx-1093639235 button-link" href="/signup"><button class="jsx-1093639235 button primary full-width button-size-l button-padding-s">Try Notion free</button></a><a class="jsx-1093639235 button-link" href="/login"><button class="jsx-1093639235 button secondary full-width button-size-l button-padding-s">Log in</button></a></div></div></div></nav><div class="jsx-1797983899 spacer"></div><div class="jsx-1822706595 global-contain"><div class="jsx-1551407306 global-limit global-limit-l"><main class="jsx-2818712398 main"><section class="global-margin-m"><div class="jsx-1551407306 global-limit global-limit-l"><div class="jsx-871024205 wrap"><div class="jsx-871024205 sidebar"><div class="jsx-871024205 sticky"><div class="jsx-871024205 sticky-inner"><div class="jsx-3202009909"><h1 class="jsx-3202009909 logo"><a class="jsx-3202009909" href="/blog"><div class="loaded--false"><div style="display:inline-block;max-width:100%;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="box-sizing:border-box;display:block;max-width:100%"><img style="max-width:100%;display:block;margin:0;border:none;padding:0" alt="" aria-hidden="true" role="presentation" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTU3IiBoZWlnaHQ9IjkzIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></div><img alt="Tools &amp; Craft" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></a></h1><div class="jsx-3202009909 description">Thoughts on the future of work, <br class="jsx-854845302 smart-break"/>from the people and teams creating it.</div><div class="jsx-3202009909 topics"><ul class="jsx-3202009909 link-list"><li class="jsx-3202009909 "><a class="jsx-3202009909" href="/blog">Latest</a></li><li class="jsx-3202009909 "><a class="jsx-3202009909" href="/blog/topic/notion-hq">Notion HQ</a></li><li class="jsx-3202009909 "><a class="jsx-3202009909" href="/blog/topic/for-teams">For Teams</a></li><li class="jsx-3202009909 is-active"><a class="jsx-3202009909" href="/blog/topic/tech">Tech</a></li><li class="jsx-3202009909 "><a class="jsx-3202009909" href="/blog/topic/pioneers">Pioneers</a></li><li class="jsx-3202009909 "><a class="jsx-3202009909" href="/blog/topic/inspiration">Inspiration ✨</a></li></ul></div><div class="jsx-200468401 only-desktop"><div class="jsx-3202009909 more"><ul class="jsx-3202009909 link-list"><li class="jsx-3202009909 subscribe-item"><div role="button" class="jsx-3091337728 popup-trigger"><div class="jsx-1783187936 subscribe-link"><span class="jsx-1783187936 emoji">💌</span> Subscribe</div></div></li></ul></div></div></div></div></div></div><div class="jsx-871024205 main"><div class="jsx-3136784560"><div class="jsx-2707934915 header"><div class="jsx-2707934915 inner"><div class="jsx-2707934915 topic"><div class="jsx-2707934915 topic-image"><div class="loaded--false"><div style="display:inline-block;max-width:100%;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="box-sizing:border-box;display:block;max-width:100%"><img style="max-width:100%;display:block;margin:0;border:none;padding:0" alt="" aria-hidden="true" role="presentation" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjI0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2ZXJzaW9uPSIxLjEiLz4="/></div><img alt="Tech" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="jsx-2707934915 topic-text"><h2 class="jsx-2707934915 topic-title">Tech</h2> — <!-- -->How we’re building Notion, block by block.</div></div></div></div><div class="jsx-3136784560 posts-grid"><article class="jsx-2486084440 post-preview"><div class="jsx-4080379949 spacer"></div><a class="jsx-2486084440" href="/blog/sharding-postgres-at-notion"><div class="jsx-3018435884 thumbnail"><div class="jsx-3018435884 thumbnail-cover"></div><div class="loaded--false"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:52.5%"></div><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div></a><div class="jsx-344305512 spacer"></div><h4 class="global-title global-title-size-s global-title-color-dark global-font-weight-bold"><a target="_self" class="jsx-826300713 inline-link disable-underline" href="/blog/sharding-postgres-at-notion">Herding elephants: Lessons learned from sharding Postgres at Notion</a></h4><a class="jsx-2486084440 subtitle" href="/blog/sharding-postgres-at-notion"><p class="jsx-2486084440">This months-long project migrated Notion’s PostgreSQL monolith into a horizontally-partitioned database fleet — an effort to make Notion faster and more reliable for years to come.</p></a><div class="jsx-2486084440 person"><div class="jsx-2777104501 person"><div class="jsx-2777104501 person-image is-small"><div class="loaded--false"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:100%"></div><img alt="Garrett Fidalgo" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="jsx-2777104501 person-text"><div class="jsx-2777104501 person-name">Garrett Fidalgo</div><div class="jsx-2777104501 person-title">Infrastructure Technical Lead</div></div></div></div></article><article class="jsx-2486084440 post-preview"><div class="jsx-4080379949 spacer"></div><a class="jsx-2486084440" href="/blog/migrating-notion-marketing-to-next-js"><div class="jsx-3018435884 thumbnail"><div class="jsx-3018435884 thumbnail-cover"></div><div class="loaded--false"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:52.5%"></div><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div></a><div class="jsx-344305512 spacer"></div><h4 class="global-title global-title-size-s global-title-color-dark global-font-weight-bold"><a target="_self" class="jsx-826300713 inline-link disable-underline" href="/blog/migrating-notion-marketing-to-next-js">Migrating Notion&#x27;s marketing site to Next.js</a></h4><a class="jsx-2486084440 subtitle" href="/blog/migrating-notion-marketing-to-next-js"><p class="jsx-2486084440">Improving performance and user experience by moving from a client-rendered marketing site to a static site generated by Next.js.</p></a><div class="jsx-2486084440 person"><div class="jsx-2777104501 person"><div class="jsx-2777104501 person-image is-small"><div class="loaded--false"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:100%"></div><img alt="Cory Etzkorn" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="jsx-2777104501 person-text"><div class="jsx-2777104501 person-name">Cory Etzkorn</div><div class="jsx-2777104501 person-title">Design &amp; Engineering, Notion</div></div></div></div></article><article class="jsx-2486084440 post-preview"><div class="jsx-4080379949 spacer"></div><a class="jsx-2486084440" href="/blog/data-model-behind-notion"><div class="jsx-3018435884 thumbnail"><div class="jsx-3018435884 thumbnail-cover"></div><div class="loaded--false"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:52.5%"></div><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div></a><div class="jsx-344305512 spacer"></div><h4 class="global-title global-title-size-s global-title-color-dark global-font-weight-bold"><a target="_self" class="jsx-826300713 inline-link disable-underline" href="/blog/data-model-behind-notion">The data model behind Notion&#x27;s flexibility</a></h4><a class="jsx-2486084440 subtitle" href="/blog/data-model-behind-notion"><p class="jsx-2486084440">Notion’s data model enables the product’s most foundational component: blocks. Through blocks, we allow users more flexibility and better control over their information.</p></a><div class="jsx-2486084440 person"><div class="jsx-2777104501 person"><div class="jsx-2777104501 person-image is-small"><div class="loaded--false"><div style="display:block;overflow:hidden;position:relative;box-sizing:border-box;margin:0"><div style="display:block;box-sizing:border-box;padding-top:100%"></div><img alt="Jake Teton-Landis" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" class="next-image" style="visibility:hidden;position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></div></div></div><div class="jsx-2777104501 person-text"><div class="jsx-2777104501 person-name">Jake Teton-Landis</div><div class="jsx-2777104501 person-title">Engineering</div></div></div></div></article></div></div></div></div></div></section></main></div></div><footer><div class="jsx-1822706595 global-contain"><div class="jsx-1551407306 global-limit global-limit-l"><nav aria-label="Main footer navigation" class="jsx-1526746199 footer-top"><div class="jsx-1526746199 logo-wrap"><div class="jsx-1526746199 logo"><svg width="87" height="30" viewBox="0 0 87 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.805 1.294l16.6-1.226c2.039-.175 2.563-.057 3.845.875l5.299 3.733c.874.642 1.165.817 1.165 1.516v20.473c0 1.283-.466 2.042-2.097 2.158L7.34 29.99c-1.224.058-1.807-.117-2.448-.934L.99 23.982c-.7-.934-.99-1.633-.99-2.45V3.334c0-1.049.466-1.924 1.805-2.04z" fill="#fff"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M18.405.068l-16.6 1.226C.466 1.41 0 2.285 0 3.334v18.198c0 .817.29 1.516.99 2.45l3.902 5.074c.641.817 1.224.992 2.448.934l19.277-1.167c1.63-.116 2.097-.875 2.097-2.158V6.192c0-.663-.262-.854-1.033-1.42a85.473 85.473 0 01-.133-.096L22.25.943c-1.282-.932-1.806-1.05-3.845-.875zM7.776 5.857c-1.574.106-1.931.13-2.825-.597L2.678 3.452c-.231-.234-.115-.526.467-.584l15.958-1.166c1.34-.117 2.038.35 2.562.758l2.737 1.983c.117.059.408.408.058.408l-16.48.992-.204.014zM5.941 26.49V9.11c0-.759.233-1.109.931-1.168L25.8 6.834c.642-.058.932.35.932 1.108v17.264c0 .759-.117 1.401-1.165 1.459l-18.113 1.05c-1.048.058-1.513-.291-1.513-1.225zm17.88-16.448c.116.525 0 1.05-.525 1.11l-.873.173v12.832c-.758.408-1.456.641-2.039.641-.932 0-1.165-.292-1.863-1.166l-5.709-8.982v8.69l1.806.409s0 1.05-1.457 1.05l-4.017.233c-.117-.234 0-.817.407-.933l1.049-.291v-11.49L9.144 12.2c-.117-.525.174-1.283.99-1.342l4.31-.29 5.94 9.098v-8.049l-1.514-.174c-.117-.643.349-1.11.931-1.167l4.02-.234z" fill="#000"></path><path d="M41.434 21.251v-7.91h.137l5.704 7.91h1.796V9.627h-1.997v7.902h-.137l-5.704-7.902H39.43V21.25h2.005zM54.715 21.429c2.635 0 4.238-1.724 4.238-4.584 0-2.852-1.611-4.584-4.238-4.584-2.618 0-4.237 1.74-4.237 4.584 0 2.86 1.595 4.584 4.237 4.584zm0-1.676c-1.393 0-2.19-1.063-2.19-2.908 0-1.837.797-2.908 2.19-2.908 1.386 0 2.183 1.071 2.183 2.908 0 1.845-.789 2.908-2.183 2.908zM60.778 10.28v2.215h-1.393v1.595h1.393v4.809c0 1.708.806 2.393 2.828 2.393.386 0 .757-.04 1.047-.097v-1.563c-.242.024-.395.04-.677.04-.837 0-1.208-.386-1.208-1.256V14.09h1.885v-1.595h-1.885v-2.216h-1.99zM65.85 21.251h1.99v-8.813h-1.99v8.813zm.991-10.27c.66 0 1.192-.533 1.192-1.201 0-.669-.531-1.209-1.192-1.209-.652 0-1.192.54-1.192 1.209 0 .668.54 1.2 1.192 1.2zM73.299 21.429c2.634 0 4.237-1.724 4.237-4.584 0-2.852-1.611-4.584-4.237-4.584-2.619 0-4.238 1.74-4.238 4.584 0 2.86 1.595 4.584 4.238 4.584zm0-1.676c-1.394 0-2.192-1.063-2.192-2.908 0-1.837.798-2.908 2.192-2.908 1.385 0 2.183 1.071 2.183 2.908 0 1.845-.79 2.908-2.183 2.908zM78.725 21.251h1.998V16.12c0-1.297.75-2.119 1.941-2.119 1.217 0 1.78.677 1.78 2.022v5.228h1.999v-5.703c0-2.103-1.072-3.287-3.037-3.287-1.314 0-2.2.604-2.619 1.587h-.137v-1.41h-1.925v8.813z" fill="#000"></path></svg></div></div><div class="jsx-1526746199 columns-wrap"><div class="jsx-3631052264 column"><div class="jsx-3631052264 label">Product</div><ul class="jsx-3631052264 list"><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/product">Overview</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/pricing">Pricing</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/customers">Customer stories</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/desktop">Desktop apps</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/mobile">Mobile apps</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/web-clipper">Web Clipper</a></li></ul></div><div class="jsx-3631052264 column"><div class="jsx-3631052264 label">Notion for</div><ul class="jsx-3631052264 list"><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/enterprise">Enterprise</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/teams">Small business</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/personal">Personal use</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/remote">Remote work</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/startups">Startups</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/product/notion-for-education">Education</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/product/notion-for-engineering">Engineering</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/product/notion-for-product">Product</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/product/notion-for-design">Design</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/product/notion-for-managers">Managers</a></li></ul></div><div class="jsx-3631052264 column"><div class="jsx-3631052264 label">Resources</div><ul class="jsx-3631052264 list"><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/blog">Blog</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/guides">Guides &amp; tutorials</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/help">Help center</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/notion/webinars-a04ea211bc504e91ac83a77e74ea9072?utm_medium=owned&amp;utm_source=notion.so&amp;utm_campaign=2021q3_webinar">Webinars</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/181e961aeb5c4ee6915307c0dfd5156d">Template gallery</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/notion/04f306fbf59a413fae15f42e2a1ab029">Community</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/157765353f2c4705bd45474e5ba8b46c">What’s new</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/Find-a-Certified-Notion-Consultant-344175b8ebfe48fda4edf557826241d0">Find a consultant</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://developers.notion.com">API docs</a><span class="jsx-3631052264 badge"><span class="jsx-59436117 badge badge-muted">Beta</span></span></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/evernote">Switch from Evernote</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/confluence">Switch from Confluence</a></li></ul></div><div class="jsx-3631052264 column"><div class="jsx-3631052264 label">Templates</div><ul class="jsx-3631052264 list"><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/4ecf0c7f102344e79a57739cee3e8535">Company home</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/cdb2100f71124807982cd57a6aff1b02">Meeting notes</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/22ea4a5722cf49ad83718b10f4ff14f9">To-dos</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/da37e6f0726644d0b1cba584cd705454">Weekly agenda</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/894be76a1d2c4f04817883313b0290d3">Docs</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/85a79965456d4238a47d7484f7b1d62e">Roadmap</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/b78272c59cdf4ee2b671371d0ac9d050">Design system</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/3b773245635a411d889c5347b4604576">Employee onboarding</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/28bb6af5578e4cf3b0980752dba97bfe">Product wiki</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/e872fab073c84db095841ba02c70c960">Content calendar</a></li></ul></div><div class="jsx-3631052264 column"><div class="jsx-3631052264 label">Company</div><ul class="jsx-3631052264 list"><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="/about">About us</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/notion/ed4565006f194a2fbe7d3a4965d7b15a">Careers</a></li><li class="jsx-3631052264 list-item"><a target="_self" class="jsx-3631052264 action" href="https://www.notion.so/205535b1d9c4440497a3d7a2ac096286">Media kit</a></li><li class="jsx-3631052264 list-item"><span class="jsx-3631052264 action">Contact sales</span></li><li class="jsx-3631052264 list-item"><span class="jsx-3631052264 action">Contact support</span></li><li class="jsx-3631052264 list-item"><a target="_blank" class="jsx-3631052264 action" href="mailto:team@makenotion.com">Email us</a></li></ul></div></div></nav><nav aria-label="Secondary footer navigation" class="jsx-3062719905 footer-bottom"><div class="jsx-3062719905 footer-bottom-desktop"><ul class="jsx-3062719905 link-list"><li class="jsx-3062719905"><div class="jsx-1101827863 language-picker-wrap"><div role="button" class="jsx-3091337728 popup-trigger"><div class="jsx-1101827863 trigger"><div class="jsx-1101827863 globe-icon"><svg viewBox="0 0 14 14" style="width:16px;height:16px;display:block;fill:rgba(0,0,0,0.6);flex-shrink:0" class="globe"><path d="M7.003 13C10.286 13 13 10.286 13 7.003 13 3.714 10.286 1 6.997 1 3.714 1 1 3.714 1 7.003 1 10.286 3.72 13 7.003 13zM5.29 4.04c.344-.883.824-1.523 1.346-1.73v1.866c-.48-.012-.93-.059-1.346-.136zm2.074-1.73c.522.207 1.002.847 1.346 1.73a8.537 8.537 0 01-1.346.136V2.31zm1.34.225a4.77 4.77 0 011.57.99c-.243.13-.527.242-.835.337a5.229 5.229 0 00-.735-1.327zm-4.984.99c.45-.427.984-.765 1.576-.99a5.229 5.229 0 00-.735 1.327 4.98 4.98 0 01-.841-.338zm6.252 3.11a9.112 9.112 0 00-.314-2.097c.42-.13.794-.29 1.108-.474.563.717.918 1.6.995 2.572h-1.79zm-7.728 0a4.74 4.74 0 01.984-2.571c.314.183.693.343 1.114.474a9.112 9.112 0 00-.314 2.098H2.244zm2.525 0a8.8 8.8 0 01.296-1.914c.486.101 1.02.16 1.57.184v1.73H4.77zm2.595 0v-1.73a10.002 10.002 0 001.57-.184 8.8 8.8 0 01.297 1.915H7.364zM2.24 7.36h1.79c.023.77.135 1.487.307 2.127a4.99 4.99 0 00-1.09.468A4.794 4.794 0 012.239 7.36zm2.53 0h1.867v1.76a9.272 9.272 0 00-1.57.183 8.342 8.342 0 01-.297-1.943zm2.595 1.76v-1.76h1.867a9.02 9.02 0 01-.296 1.943 9.344 9.344 0 00-1.57-.183zm2.294.367a9.01 9.01 0 00.314-2.127h1.79a4.742 4.742 0 01-1.002 2.595 5.098 5.098 0 00-1.102-.468zm-2.294.361c.48.012.93.06 1.346.137-.344.877-.824 1.523-1.346 1.73V9.847zm-2.074.137a8.537 8.537 0 011.346-.137v1.867c-.522-.207-1.002-.853-1.346-1.73zm4.149.172c.302.094.58.207.83.337a4.736 4.736 0 01-1.542.966c.273-.355.516-.794.712-1.303zm-5.701.337a4.78 4.78 0 01.823-.337c.196.503.433.942.706 1.297a4.767 4.767 0 01-1.53-.96z"></path></svg></div><div class="jsx-1101827863 label">English</div></div></div></div></li><li class="jsx-3062719905"><a class="jsx-3062719905 action" href="https://www.notion.so/28ffdd083dc3473e9c2da6ec011b58ac">Terms &amp; privacy</a></li><li class="jsx-3062719905 status-item"><div class="jsx-79536284 status-item"><a class="jsx-79536284 action" href="https://status.notion.so">Status</a></div></li><li class="jsx-3062719905"><div class="jsx-2462007035 copyright">©<!-- -->2021<!-- --> Notion Labs, Inc.</div></li></ul><ul class="jsx-506245689 social-list"><li class="jsx-506245689 twitter"><a target="_blank" class="jsx-1093639235 button-link" href="https://twitter.com/NotionHQ"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 22 18" style="width:20px;height:16px;display:block;fill:currentColor;flex-shrink:0;margin-top:2px" class="shareTwitter"><path d="m22 2.12799c-.8083.36413-1.6798.60642-2.5899.71441.9321-.56211 1.6455-1.45374 1.9851-2.514271-.8716.51919-1.8393.899931-2.8648 1.103451-.8248-.883314-1.9974-1.43158-3.2951-1.43158-2.4922 0-4.5102 2.03384-4.5102 4.54257 0 .35444.0385.70057.1154 1.03423-3.75002-.19106-7.07532-1.99923-9.30088-4.750248-.38628.670098-.610352 1.453738-.610352 2.284438 0 1.57557.794552 2.96839 2.005622 3.7811-.73956-.02216-1.43514-.22983-2.045487-.56627v.05677c0 2.20275 1.554737 4.04141 3.620847 4.45671-.37803.1039-.77806.1606-1.19046.1606-.29142 0-.57185-.0304-.85091-.0817.57598 1.8041 2.24207 3.1193 4.2147 3.1581-1.54649 1.2198-3.48888 1.9466-5.60585 1.9466-.365658 0-.721694-.0221-1.07773-.065 2.0015 1.2931 4.37278 2.0421 6.92002 2.0421 8.29878 0 12.84068-6.9267 12.84068-12.9327 0-.19937-.0041-.3932-.0124-.58841.8812-.63549 1.6455-1.43712 2.2503-2.34952z"></path></svg></button></a></li><li class="jsx-506245689 linked-in"><a target="_blank" class="jsx-1093639235 button-link" href="https://www.linkedin.com/company/notionhq/"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 20 18" style="width:20px;height:18px;display:block;fill:currentColor;flex-shrink:0" class="shareLinkedIn"><path clip-rule="evenodd" d="m2.0769 4.15379c1.14644 0 2.07689-.93045 2.07689-2.07689 0-1.14645-.93045-2.0769-2.07689-2.0769-1.14645 0-2.0769.93045-2.0769 2.0769 0 1.14644.93045 2.07689 2.0769 2.07689zm-2.0769 13.84621v-12.46143h4.15379v12.46143zm6.92371-12.46143h3.83119v1.96336h.0554c.533-.95675 1.8373-1.96336 3.7827-1.96336 4.0444 0 4.7921 2.5172 4.7921 5.79173v6.6697h-3.9946v-5.9123c0-1.4095-.0291-3.22471-2.0769-3.22471-2.0796 0-2.3981 1.53551-2.3981 3.12231v6.0147h-3.99179z" fill-rule="evenodd"></path></svg></button></a></li><li class="jsx-506245689 facebook"><a target="_blank" class="jsx-1093639235 button-link" href="https://www.facebook.com/NotionHQ/"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 18 18" style="width:18px;height:18px;display:block;fill:currentColor;flex-shrink:0" class="shareFacebook"><path d="M17.999 8.999c0-4.97-4.029-8.999-8.999-8.999s-8.999 4.029-8.999 8.999c0 4.492 3.291 8.215 7.593 8.89v-6.289h-2.285v-2.601h2.285v-1.983c0-2.255 1.344-3.501 3.399-3.501 0.985 0 2.015 0.176 2.015 0.176v2.215h-1.135c-1.118 0-1.467 0.694-1.467 1.405v1.688h2.496l-0.399 2.601h-2.097v6.289c4.302-0.675 7.593-4.398 7.593-8.89z"></path></svg></button></a></li><li class="jsx-506245689 instagram"><a target="_blank" class="jsx-1093639235 button-link" href="https://www.instagram.com/notionhq/"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 18 18" style="width:18px;height:18px;display:block;fill:currentColor;flex-shrink:0" class="shareInstagram"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 1.621c2.405 0 2.689.011 3.635.053.879.039 1.354.186 1.67.309.418.162.721.359 1.034.671.316.316.51.615.675 1.034.123.316.271.795.309 1.67.042.949.053 1.234.053 3.635s-.011 2.689-.053 3.635c-.039.879-.186 1.354-.309 1.67a2.802 2.802 0 01-.671 1.034c-.316.316-.615.51-1.034.675-.316.123-.795.271-1.67.309-.949.042-1.234.053-3.635.053s-2.689-.011-3.635-.053c-.879-.039-1.354-.186-1.67-.309a2.802 2.802 0 01-1.034-.671 2.815 2.815 0 01-.675-1.034c-.123-.316-.271-.795-.309-1.67-.042-.949-.053-1.234-.053-3.635s.011-2.689.053-3.635c.039-.879.186-1.354.309-1.67.162-.418.359-.721.671-1.034.316-.316.615-.51 1.034-.675.316-.123.795-.271 1.67-.309.946-.042 1.23-.053 3.635-.053zM9 0C6.557 0 6.251.011 5.291.053 4.335.095 3.677.25 3.108.471a4.389 4.389 0 00-1.596 1.041A4.404 4.404 0 00.471 3.105C.25 3.678.095 4.332.053 5.288.011 6.251 0 6.557 0 9c0 2.443.011 2.749.053 3.709.042.956.197 1.614.418 2.183a4.389 4.389 0 001.041 1.596 4.392 4.392 0 001.593 1.037c.573.221 1.227.376 2.183.418.96.042 1.266.053 3.709.053s2.749-.011 3.709-.053c.956-.042 1.614-.197 2.183-.418a4.413 4.413 0 001.593-1.037c.5-.499.809-1.002 1.037-1.593.221-.573.376-1.227.418-2.183.042-.96.053-1.266.053-3.709s-.011-2.749-.053-3.709c-.042-.956-.197-1.614-.418-2.183a4.21 4.21 0 00-1.03-1.6A4.392 4.392 0 0014.896.474c-.573-.221-1.227-.376-2.183-.418C11.75.01 11.444 0 9 0zm0 4.377A4.625 4.625 0 004.377 9 4.625 4.625 0 009 13.623 4.625 4.625 0 0013.623 9 4.625 4.625 0 009 4.377zm0 7.622A3 3 0 119 6 3 3 0 019 12zm4.806-6.726a1.079 1.079 0 100-2.158 1.079 1.079 0 000 2.158z"></path></svg></button></a></li><li class="jsx-506245689 youtube"><a target="_blank" class="jsx-1093639235 button-link" href="https://www.youtube.com/channel/UCoSvlWS5XcwaSzIcbuJ-Ysg"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 18 18" style="width:18px;height:18px;display:block;fill:currentColor;flex-shrink:0" class="shareYouTube"><path d="M9 2.070c-8.845 0-9 0.787-9 6.93s0.155 6.93 9 6.93 9-0.787 9-6.93-0.155-6.93-9-6.93zM11.884 9.301l-4.041 1.886c-0.354 0.164-0.644-0.020-0.644-0.41v-3.553c0-0.39 0.29-0.574 0.644-0.41l4.041 1.886c0.354 0.166 0.354 0.436 0 0.601z"></path></svg></button></a></li></ul></div><div class="jsx-3062719905 footer-bottom-mobile"><ul class="jsx-3062719905 link-list-mobile"><li class="jsx-3062719905"><a class="jsx-3062719905 action" href="https://www.notion.so/28ffdd083dc3473e9c2da6ec011b58ac">Terms &amp; privacy</a></li><li class="jsx-3062719905 status-item"><div class="jsx-79536284 status-item"><a class="jsx-79536284 action" href="https://status.notion.so">Status</a></div></li></ul><ul class="jsx-3062719905 link-list-mobile"><li class="jsx-3062719905"><div class="jsx-1101827863 language-picker-wrap"><div role="button" class="jsx-3091337728 popup-trigger"><div class="jsx-1101827863 trigger"><div class="jsx-1101827863 globe-icon"><svg viewBox="0 0 14 14" style="width:16px;height:16px;display:block;fill:rgba(0,0,0,0.6);flex-shrink:0" class="globe"><path d="M7.003 13C10.286 13 13 10.286 13 7.003 13 3.714 10.286 1 6.997 1 3.714 1 1 3.714 1 7.003 1 10.286 3.72 13 7.003 13zM5.29 4.04c.344-.883.824-1.523 1.346-1.73v1.866c-.48-.012-.93-.059-1.346-.136zm2.074-1.73c.522.207 1.002.847 1.346 1.73a8.537 8.537 0 01-1.346.136V2.31zm1.34.225a4.77 4.77 0 011.57.99c-.243.13-.527.242-.835.337a5.229 5.229 0 00-.735-1.327zm-4.984.99c.45-.427.984-.765 1.576-.99a5.229 5.229 0 00-.735 1.327 4.98 4.98 0 01-.841-.338zm6.252 3.11a9.112 9.112 0 00-.314-2.097c.42-.13.794-.29 1.108-.474.563.717.918 1.6.995 2.572h-1.79zm-7.728 0a4.74 4.74 0 01.984-2.571c.314.183.693.343 1.114.474a9.112 9.112 0 00-.314 2.098H2.244zm2.525 0a8.8 8.8 0 01.296-1.914c.486.101 1.02.16 1.57.184v1.73H4.77zm2.595 0v-1.73a10.002 10.002 0 001.57-.184 8.8 8.8 0 01.297 1.915H7.364zM2.24 7.36h1.79c.023.77.135 1.487.307 2.127a4.99 4.99 0 00-1.09.468A4.794 4.794 0 012.239 7.36zm2.53 0h1.867v1.76a9.272 9.272 0 00-1.57.183 8.342 8.342 0 01-.297-1.943zm2.595 1.76v-1.76h1.867a9.02 9.02 0 01-.296 1.943 9.344 9.344 0 00-1.57-.183zm2.294.367a9.01 9.01 0 00.314-2.127h1.79a4.742 4.742 0 01-1.002 2.595 5.098 5.098 0 00-1.102-.468zm-2.294.361c.48.012.93.06 1.346.137-.344.877-.824 1.523-1.346 1.73V9.847zm-2.074.137a8.537 8.537 0 011.346-.137v1.867c-.522-.207-1.002-.853-1.346-1.73zm4.149.172c.302.094.58.207.83.337a4.736 4.736 0 01-1.542.966c.273-.355.516-.794.712-1.303zm-5.701.337a4.78 4.78 0 01.823-.337c.196.503.433.942.706 1.297a4.767 4.767 0 01-1.53-.96z"></path></svg></div><div class="jsx-1101827863 label">English</div></div></div></div></li><li class="jsx-3062719905"><div class="jsx-3062719905 mobile-social"><ul class="jsx-506245689 social-list"><li class="jsx-506245689 twitter"><a target="_blank" class="jsx-1093639235 button-link" href="https://twitter.com/NotionHQ"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 22 18" style="width:20px;height:16px;display:block;fill:currentColor;flex-shrink:0;margin-top:2px" class="shareTwitter"><path d="m22 2.12799c-.8083.36413-1.6798.60642-2.5899.71441.9321-.56211 1.6455-1.45374 1.9851-2.514271-.8716.51919-1.8393.899931-2.8648 1.103451-.8248-.883314-1.9974-1.43158-3.2951-1.43158-2.4922 0-4.5102 2.03384-4.5102 4.54257 0 .35444.0385.70057.1154 1.03423-3.75002-.19106-7.07532-1.99923-9.30088-4.750248-.38628.670098-.610352 1.453738-.610352 2.284438 0 1.57557.794552 2.96839 2.005622 3.7811-.73956-.02216-1.43514-.22983-2.045487-.56627v.05677c0 2.20275 1.554737 4.04141 3.620847 4.45671-.37803.1039-.77806.1606-1.19046.1606-.29142 0-.57185-.0304-.85091-.0817.57598 1.8041 2.24207 3.1193 4.2147 3.1581-1.54649 1.2198-3.48888 1.9466-5.60585 1.9466-.365658 0-.721694-.0221-1.07773-.065 2.0015 1.2931 4.37278 2.0421 6.92002 2.0421 8.29878 0 12.84068-6.9267 12.84068-12.9327 0-.19937-.0041-.3932-.0124-.58841.8812-.63549 1.6455-1.43712 2.2503-2.34952z"></path></svg></button></a></li><li class="jsx-506245689 linked-in"><a target="_blank" class="jsx-1093639235 button-link" href="https://www.linkedin.com/company/notionhq/"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 20 18" style="width:20px;height:18px;display:block;fill:currentColor;flex-shrink:0" class="shareLinkedIn"><path clip-rule="evenodd" d="m2.0769 4.15379c1.14644 0 2.07689-.93045 2.07689-2.07689 0-1.14645-.93045-2.0769-2.07689-2.0769-1.14645 0-2.0769.93045-2.0769 2.0769 0 1.14644.93045 2.07689 2.0769 2.07689zm-2.0769 13.84621v-12.46143h4.15379v12.46143zm6.92371-12.46143h3.83119v1.96336h.0554c.533-.95675 1.8373-1.96336 3.7827-1.96336 4.0444 0 4.7921 2.5172 4.7921 5.79173v6.6697h-3.9946v-5.9123c0-1.4095-.0291-3.22471-2.0769-3.22471-2.0796 0-2.3981 1.53551-2.3981 3.12231v6.0147h-3.99179z" fill-rule="evenodd"></path></svg></button></a></li><li class="jsx-506245689 facebook"><a target="_blank" class="jsx-1093639235 button-link" href="https://www.facebook.com/NotionHQ/"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 18 18" style="width:18px;height:18px;display:block;fill:currentColor;flex-shrink:0" class="shareFacebook"><path d="M17.999 8.999c0-4.97-4.029-8.999-8.999-8.999s-8.999 4.029-8.999 8.999c0 4.492 3.291 8.215 7.593 8.89v-6.289h-2.285v-2.601h2.285v-1.983c0-2.255 1.344-3.501 3.399-3.501 0.985 0 2.015 0.176 2.015 0.176v2.215h-1.135c-1.118 0-1.467 0.694-1.467 1.405v1.688h2.496l-0.399 2.601h-2.097v6.289c4.302-0.675 7.593-4.398 7.593-8.89z"></path></svg></button></a></li><li class="jsx-506245689 instagram"><a target="_blank" class="jsx-1093639235 button-link" href="https://www.instagram.com/notionhq/"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 18 18" style="width:18px;height:18px;display:block;fill:currentColor;flex-shrink:0" class="shareInstagram"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 1.621c2.405 0 2.689.011 3.635.053.879.039 1.354.186 1.67.309.418.162.721.359 1.034.671.316.316.51.615.675 1.034.123.316.271.795.309 1.67.042.949.053 1.234.053 3.635s-.011 2.689-.053 3.635c-.039.879-.186 1.354-.309 1.67a2.802 2.802 0 01-.671 1.034c-.316.316-.615.51-1.034.675-.316.123-.795.271-1.67.309-.949.042-1.234.053-3.635.053s-2.689-.011-3.635-.053c-.879-.039-1.354-.186-1.67-.309a2.802 2.802 0 01-1.034-.671 2.815 2.815 0 01-.675-1.034c-.123-.316-.271-.795-.309-1.67-.042-.949-.053-1.234-.053-3.635s.011-2.689.053-3.635c.039-.879.186-1.354.309-1.67.162-.418.359-.721.671-1.034.316-.316.615-.51 1.034-.675.316-.123.795-.271 1.67-.309.946-.042 1.23-.053 3.635-.053zM9 0C6.557 0 6.251.011 5.291.053 4.335.095 3.677.25 3.108.471a4.389 4.389 0 00-1.596 1.041A4.404 4.404 0 00.471 3.105C.25 3.678.095 4.332.053 5.288.011 6.251 0 6.557 0 9c0 2.443.011 2.749.053 3.709.042.956.197 1.614.418 2.183a4.389 4.389 0 001.041 1.596 4.392 4.392 0 001.593 1.037c.573.221 1.227.376 2.183.418.96.042 1.266.053 3.709.053s2.749-.011 3.709-.053c.956-.042 1.614-.197 2.183-.418a4.413 4.413 0 001.593-1.037c.5-.499.809-1.002 1.037-1.593.221-.573.376-1.227.418-2.183.042-.96.053-1.266.053-3.709s-.011-2.749-.053-3.709c-.042-.956-.197-1.614-.418-2.183a4.21 4.21 0 00-1.03-1.6A4.392 4.392 0 0014.896.474c-.573-.221-1.227-.376-2.183-.418C11.75.01 11.444 0 9 0zm0 4.377A4.625 4.625 0 004.377 9 4.625 4.625 0 009 13.623 4.625 4.625 0 0013.623 9 4.625 4.625 0 009 4.377zm0 7.622A3 3 0 119 6 3 3 0 019 12zm4.806-6.726a1.079 1.079 0 100-2.158 1.079 1.079 0 000 2.158z"></path></svg></button></a></li><li class="jsx-506245689 youtube"><a target="_blank" class="jsx-1093639235 button-link" href="https://www.youtube.com/channel/UCoSvlWS5XcwaSzIcbuJ-Ysg"><button class="jsx-1093639235 button simple button-size-m button-padding-s"><svg viewBox="0 0 18 18" style="width:18px;height:18px;display:block;fill:currentColor;flex-shrink:0" class="shareYouTube"><path d="M9 2.070c-8.845 0-9 0.787-9 6.93s0.155 6.93 9 6.93 9-0.787 9-6.93-0.155-6.93-9-6.93zM11.884 9.301l-4.041 1.886c-0.354 0.164-0.644-0.020-0.644-0.41v-3.553c0-0.39 0.29-0.574 0.644-0.41l4.041 1.886c0.354 0.166 0.354 0.436 0 0.601z"></path></svg></button></a></li></ul></div></li></ul><div class="jsx-3062719905 mobile-copyright"><div class="jsx-2462007035 copyright">©<!-- -->2021<!-- --> Notion Labs, Inc.</div></div></div></nav></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"1ScuIR8dJedttPracenZDQ","type":"Entry","createdAt":"2021-10-05T17:23:49.723Z","updatedAt":"2021-10-06T23:48:19.682Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"Herding elephants: Lessons learned from sharding Postgres at Notion","slug":"sharding-postgres-at-notion","subtitle":"This months-long project migrated Notion’s PostgreSQL monolith into a horizontally-partitioned database fleet — an effort to make Notion faster and more reliable for years to come.","publishedAt":"2021-10-06T00:00-07:00","people":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"6i0FWl9vAOyRGcRgLTxMyP","type":"Entry","createdAt":"2021-10-04T23:31:36.872Z","updatedAt":"2021-10-06T16:52:38.227Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":3,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"person"}},"locale":"en-US"},"fields":{"name":"Garrett Fidalgo","jobTitle":"Infrastructure Technical Lead","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"2SiWU7mGoxloDrFPgpt8pl","type":"Asset","createdAt":"2021-10-04T23:31:09.507Z","updatedAt":"2021-10-04T23:31:09.507Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Garrett’s illustration","description":"An illustration of Garrett ","file":{"url":"//images.ctfassets.net/spoqsaf9291f/2SiWU7mGoxloDrFPgpt8pl/5442af48089c88adb402c25be1ad0b56/Garrett.png","details":{"size":155303,"image":{"width":1000,"height":1000}},"fileName":"Garrett.png","contentType":"image/png"}}}}}],"topic":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5fBleQPwPVEQHmNv3bCt0q","type":"Entry","createdAt":"2021-05-17T19:44:24.367Z","updatedAt":"2021-07-09T18:01:49.395Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"postTopic"}},"locale":"en-US"},"fields":{"title":"Tech","slug":"tech","description":"How we’re building Notion, block by block.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5eeQ1CWX51pw9WGoLFnLuS","type":"Asset","createdAt":"2021-05-17T19:35:55.048Z","updatedAt":"2021-05-17T19:35:55.048Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"blog-topic-tech","file":{"url":"//images.ctfassets.net/spoqsaf9291f/5eeQ1CWX51pw9WGoLFnLuS/1b195b7d9823e953f5de226eee289588/blog-topic-tech.png","details":{"size":9882,"image":{"width":200,"height":150}},"fileName":"blog-topic-tech.png","contentType":"image/png"}}},"order":3}}],"tags":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"4tCAN735VMpAY57cUIjhoe","type":"Entry","createdAt":"2021-04-21T00:03:17.859Z","updatedAt":"2021-09-02T21:49:41.080Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"tag"}},"locale":"en-US"},"fields":{"name":"Company news","slug":"company-news"}},{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"2j2LpU21aSxlMeuWvInDFC","type":"Entry","createdAt":"2020-09-17T00:52:34.880Z","updatedAt":"2021-09-09T10:20:22.961Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"tag"}},"locale":"en-US"},"fields":{"name":"Engineering","slug":"engineering"}}],"thumbnail":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"1DX7ZrgbAjNhpjhp1g4yFN","type":"Asset","createdAt":"2021-10-04T23:33:59.715Z","updatedAt":"2021-10-04T23:33:59.715Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Sharding thumbnail","description":"A visual representation of sharding","file":{"url":"//images.ctfassets.net/spoqsaf9291f/1DX7ZrgbAjNhpjhp1g4yFN/9781390a19c619e96a0420f1a0a12807/sharding-thumb.png","details":{"size":48387,"image":{"width":1200,"height":630}},"fileName":"sharding-thumb.png","contentType":"image/png"}}},"body":{"nodeType":"document","data":{},"content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Earlier this year, we took Notion down for five minutes of scheduled maintenance. While our announcement gestured at “increased stability and performance,” behind the scenes was the culmination of months of focused, urgent teamwork: sharding Notion’s PostgreSQL monolith into a horizontally-partitioned database fleet.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"6w8hrRVL9eS2lCsBeXMvUz","type":"Entry","createdAt":"2021-10-04T23:37:19.047Z","updatedAt":"2021-10-05T22:01:49.535Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":3,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"callout"}},"locale":"en-US"},"fields":{"title":"Where’s the word “shard” come from? ","style":"Tip","body":{"nodeType":"document","data":{},"content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The shard nomenclature is ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"thought to originate","marks":[],"data":{}}],"data":{"uri":"https://www.raphkoster.com/2009/01/08/database-sharding-came-from-uo/"}},{"nodeType":"text","value":" from the MMORPG ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Ultima Online","marks":[],"data":{}}],"data":{"uri":"https://uo.com/"}},{"nodeType":"text","value":", when the game developers needed an in-universe explanation for the existence of multiple game servers running parallel copies of the world. Specifically, each shard emerged from a shattered crystal through which the evil wizard Mondain had previously attempted to seize control of the world.","marks":[],"data":{}}],"data":{}}]},"toggle":false,"hideTitle":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"While the switchover succeeded to much jubilation, we remained quiet in case of any post-migration hiccups. To our delight, users quickly began to notice the improvement:","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"Hy2PLuIcIWZD77EFx3aRg","type":"Entry","createdAt":"2021-10-04T23:41:35.357Z","updatedAt":"2021-10-04T23:43:54.817Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":3,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"tweet"}},"locale":"en-US"},"fields":{"name":"Guillermo Rauch","handle":"rauchg","body":"Amazing how much faster @notionhq feels lately. The “show don’t tell” is strong with this one.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"3zR4GR6WIfurXCY7DQiW3U","type":"Asset","createdAt":"2021-10-04T23:43:51.544Z","updatedAt":"2021-10-04T23:43:51.544Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Guillermo Rauch","description":"","file":{"url":"//images.ctfassets.net/spoqsaf9291f/3zR4GR6WIfurXCY7DQiW3U/81fd67daee7087a8e9732cff6968cd0a/LgLb--Of_400x400.jpeg","details":{"size":26880,"image":{"width":400,"height":400}},"fileName":"LgLb--Of_400x400.jpeg","contentType":"image/jpeg"}}},"url":"https://twitter.com/rauchg/status/1387113555321782273?s=20"}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"But a single maintenance window doesn’t tell the whole story. Our team spent months architecting this migration to make Notion faster and more reliable for years to come. ","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Let me tell you the story of how we sharded and what we learned along the way.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Deciding when to shard","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Sharding represented a major milestone in our ongoing bid to improve application performance. Over the past few years, it’s been gratifying and humbling to see more and more people adopt Notion into every aspect of their lives. And unsurprisingly, all of the new company wikis, project trackers, and Pokédexes have meant billions of new ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"blocks, files, and spaces","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/blog/data-model-behind-notion"}},{"nodeType":"text","value":" to store. By mid-2020, it was clear that product usage would surpass the abilities of our trusty Postgres monolith, which had served us dutifully through five years and four orders of magnitude of growth. Engineers on-call often woke up to database CPU spikes, and simple ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"catalog-only migrations","marks":[],"data":{}}],"data":{"uri":"https://medium.com/paypal-tech/postgresql-at-scale-database-schema-changes-without-downtime-20d3749ed680"}},{"nodeType":"text","value":" became unsafe and uncertain.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"When it comes to sharding, fast-growing startups must navigate a delicate tradeoff. During the aughts, an influx of blog posts ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"expounded","marks":[],"data":{}}],"data":{"uri":"https://www.percona.com/blog/2009/08/06/why-you-dont-want-to-shard/"}},{"nodeType":"text","value":" ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"the","marks":[],"data":{}}],"data":{"uri":"http://www.37signals.com/svn/posts/1509-mr-moore-gets-to-punt-on-sharding#"}},{"nodeType":"text","value":" ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"perils","marks":[],"data":{}}],"data":{"uri":"https://www.drdobbs.com/errant-architectures/184414966"}},{"nodeType":"text","value":" ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"of","marks":[],"data":{}}],"data":{"uri":"https://www.infoworld.com/article/2073449/think-twice-before-sharding.html"}},{"nodeType":"text","value":" sharding prematurely: increased maintenance burden, newfound constraints in application-level code, and architectural path dependence.¹ Of course, at our scale sharding was inevitable. The question was simply when.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"For us, the inflection point arrived when the Postgres ","marks":[],"data":{}},{"nodeType":"text","value":"VACUUM","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" process began to stall consistently, preventing the database from reclaiming disk space from dead tuples. While disk capacity can be increased, more worrying was the prospect of ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"transaction ID (TXID) wraparound","marks":[],"data":{}}],"data":{"uri":"https://blog.sentry.io/2015/07/23/transaction-id-wraparound-in-postgres"}},{"nodeType":"text","value":", a safety mechanism in which Postgres would stop processing all writes to avoid clobbering existing data. Realizing that TXID wraparound would pose an existential threat to the product, our infrastructure team doubled down and got to work.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Designing a sharding scheme","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"If you’ve never sharded a database before, here’s the idea: instead of vertically scaling a database with progressively heftier instances, ","marks":[],"data":{}},{"nodeType":"text","value":"horizontally","marks":[{"type":"italic"}],"data":{}},{"nodeType":"text","value":" scale by partitioning data across multiple databases. Now you can easily spin up additional hosts to accommodate growth. Unfortunately, now your data is in multiple places, so you need to design a system that maximizes performance and consistency in a distributed setting.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"12Pi3z9KiAYyVC03Djb8ob","type":"Entry","createdAt":"2021-10-04T23:49:46.091Z","updatedAt":"2021-10-05T16:09:23.834Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"callout"}},"locale":"en-US"},"fields":{"title":"Sharding - callout 2","style":"Tip","body":{"nodeType":"document","data":{},"content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Why not just keep scaling vertically? As we found, playing Cookie Clicker with the RDS “Resize Instance” button is not a viable long-term strategy — even if you have the budget for it. Query performance and upkeep processes often begin to degrade well before a table reaches the maximum hardware-bound size; our stalling Postgres auto-vacuum was an example of this soft limitation.","marks":[],"data":{}}],"data":{}}]},"toggle":false,"hideTitle":true}}}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Application-level sharding","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We decided to implement our own partitioning scheme and route queries from application logic, an approach known as ","marks":[],"data":{}},{"nodeType":"text","value":"application-level sharding","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":". During our initial research, we also considered packaged sharding/clustering solutions such as ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Citus","marks":[],"data":{}}],"data":{"uri":"https://www.citusdata.com/"}},{"nodeType":"text","value":" for Postgres or ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Vitess","marks":[],"data":{}}],"data":{"uri":"https://vitess.io/"}},{"nodeType":"text","value":" for MySQL. While these solutions appeal in their simplicity and provide cross-shard tooling out of the box, the actual clustering logic is opaque, and we wanted control over the distribution of our data.²","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Application-level sharding required us to make the following design decisions:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"What data should we shard?","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Part of what makes our data set unique is that the ","marks":[],"data":{}},{"nodeType":"text","value":"block","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" table reflects ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"trees of user-created content","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/blog/data-model-behind-notion"}},{"nodeType":"text","value":", which can vary wildly in size, depth, and branching factor. A single large enterprise customer, for instance, generates more load than many average personal workspaces combined. We wanted to only shard the necessary tables, while preserving locality for related data.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"How should we partition the data?","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Good partition keys ensure that tuples are uniformly distributed across shards. The choice of partition key also depends on application structure, since distributed joins are expensive and transactionality guarantees are typically limited to a single host.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"How many shards should we create? How should those shards be organized?","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" This consideration encompasses both the number of logical shards per table, and the concrete mapping between logical shards and physical hosts.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Decision 1: Shard all data transitively related to block","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Since Notion’s ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"data model","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/blog/data-model-behind-notion"}},{"nodeType":"text","value":" revolves around the concept of a block, each occupying a row in our database, the ","marks":[],"data":{}},{"nodeType":"text","value":"block","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" table was the highest-priority for sharding. However, a block may reference other tables like ","marks":[],"data":{}},{"nodeType":"text","value":"space","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" (workspaces) or ","marks":[],"data":{}},{"nodeType":"text","value":"discussion","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" (page-level and inline discussion threads). In turn, a ","marks":[],"data":{}},{"nodeType":"text","value":"discussion","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" may reference rows in the ","marks":[],"data":{}},{"nodeType":"text","value":"comment","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" table, and so on.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We decided to shard ","marks":[],"data":{}},{"nodeType":"text","value":"all tables reachable from the ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"block","marks":[{"type":"code"},{"type":"bold"}],"data":{}},{"nodeType":"text","value":" table","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" via some kind of foreign key relationship. Not all of these tables needed to be sharded, but if a record was stored in the main database while its related block was stored on a different physical shard, we could introduce inconsistencies when writing to different datastores.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7B3mm1oEWoRrQ6USlyOYNK","type":"Entry","createdAt":"2021-10-04T23:59:59.927Z","updatedAt":"2021-10-05T16:15:19.385Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"callout"}},"locale":"en-US"},"fields":{"title":"Sharding - callout 3","style":"Tip","body":{"nodeType":"document","data":{},"content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"For example, consider a block stored in one database, with related comments in another database. If the block is deleted, the comments should be updated — but since transactionality guarantees only apply within each datastore, the block deletion could succeed while the comment update fails.","marks":[],"data":{}}],"data":{}}]},"toggle":false,"hideTitle":true}}}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Decision 2: Partition block data by workspace ID","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Once we decided which tables to shard, we had to divide them up. Choosing a good partition scheme depends heavily on the distribution and connectivity of the data; since Notion is a team-based product, our next decision was to ","marks":[],"data":{}},{"nodeType":"text","value":"partition data by workspace ID","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":".³","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Each workspace is assigned a UUID upon creation, so we can partition the UUID space into uniform buckets. Because each row in a sharded table is either a block or related to one, and ","marks":[],"data":{}},{"nodeType":"text","value":"each block belongs to exactly one workspace","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":", we used the workspace ID as the ","marks":[],"data":{}},{"nodeType":"text","value":"partition key","marks":[{"type":"italic"}],"data":{}},{"nodeType":"text","value":". Since users typically query data within a single workspace at a time, we avoid most cross-shard joins.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Decision 3: Capacity planning","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"6thSW64vGIDGePwu2k3BCt","type":"Entry","createdAt":"2021-10-05T00:03:40.730Z","updatedAt":"2021-10-05T00:03:40.730Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"tweet"}},"locale":"en-US"},"fields":{"name":"Nintendo .DS_Store","handle":"sliminality","body":"sharding postgres: \"would you rather fight 1 user making 1M requests or 1M users making 1 request each\"","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"6AGQ8LeZWofYkX5SUriYU3","type":"Asset","createdAt":"2021-10-05T00:03:19.811Z","updatedAt":"2021-10-05T00:03:19.811Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Slim twitter","description":"","file":{"url":"//images.ctfassets.net/spoqsaf9291f/6AGQ8LeZWofYkX5SUriYU3/db90f9788fb33e584aeba008d4c52abf/slim_twitter.png","details":{"size":83114,"image":{"width":400,"height":400}},"fileName":"slim twitter.png","contentType":"image/png"}}},"url":"https://twitter.com/sliminality/status/1190441753750360064?s=20"}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Having decided on a partitioning scheme, our goal was to design a sharded setup that would handle our existing data ","marks":[],"data":{}},{"nodeType":"text","value":"and","marks":[{"type":"italic"}],"data":{}},{"nodeType":"text","value":" scale to meet our two-year usage projection with low effort. Here were some of our constraints:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Instance type:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Disk I/O throughput, quantified in ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"IOPS","marks":[],"data":{}}],"data":{"uri":"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Storage.html"}},{"nodeType":"text","value":", is limited by both AWS instance type as well as disk volume. We needed at least 60K total IOPS to meet existing demand, with the capacity to scale further if needed.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Number of physical and logical shards:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" To keep Postgres humming and preserve RDS replication guarantees, we set an upper bound of 500 GB per table and 10 TB per physical database. We needed to choose a number of logical shards and a number of physical databases, such that the shards could be evenly divided across databases.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Number of instances:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" More instances means higher maintenance cost, but a more robust system.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Cost:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" We wanted our bill to scale linearly with our database setup, and we wanted the flexibility to scale compute and disk space separately.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"After crunching the numbers, we settled on an architecture consisting of ","marks":[],"data":{}},{"nodeType":"text","value":"480 logical shards","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" evenly distributed across ","marks":[],"data":{}},{"nodeType":"text","value":"32 physical databases","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":". The hierarchy looked like this:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Physical database (32 total)","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Logical shard, represented as a Postgres ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"schema","marks":[],"data":{}}],"data":{"uri":"https://www.postgresql.org/docs/current/ddl-schemas.html"}},{"nodeType":"text","value":" (15 per database, 480 total)","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"block","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" table (1 per logical shard, 480 total)","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"collection","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" table (1 per logical shard, 480 total)","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"space","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" table (1 per logical shard, 480 total)","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"etc. for all sharded tables","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}}],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"2cGjIHaUqmEUe78iLTWbQq","type":"Entry","createdAt":"2021-10-05T00:06:05.235Z","updatedAt":"2021-10-05T16:20:17.944Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"callout"}},"locale":"en-US"},"fields":{"title":"Sharding callout 4","style":"Tip","body":{"nodeType":"document","data":{},"content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"You may be wondering, \"","marks":[],"data":{}},{"nodeType":"text","value":"Why 480 shards?","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" I thought all computer science was done in powers of 2, and that's not a drive size I recognize!\"","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"There were many factors that led to the choice of 480:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"2","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"3","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"4","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"5","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"6","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"8","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"10, 12, 15, 16, 20, 24, 30, 32, 40, 48, 60, 80, 96, 120, 160, 240","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The point is, 480 is divisible by a lot of numbers — which provides flexibility to add or remove physical hosts while preserving uniform shard distribution. For example, in the future we could scale from 32 to 40 to 48 hosts, making incremental jumps each time.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"By contrast, suppose we had 512 logical shards. The factors of 512 are all powers of 2, meaning we’d jump from 32 to ","marks":[],"data":{}},{"nodeType":"text","value":"64","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" hosts if we wanted to keep the shards even. Any power of 2 would require us to ","marks":[],"data":{}},{"nodeType":"text","value":"double","marks":[{"type":"italic"}],"data":{}},{"nodeType":"text","value":" the number of physical hosts to upscale. Pick values with a lot of factors!","marks":[],"data":{}}],"data":{}}]},"toggle":false,"hideTitle":true}}}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"1jcwIqLHp0BA5IxNc4SQ1V","type":"Entry","createdAt":"2021-10-04T23:55:14.352Z","updatedAt":"2021-10-04T23:56:16.454Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":3,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Sharing - monolith and physical databases","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"eSDWC4QLGQHwbGEOTWwDu","type":"Asset","createdAt":"2021-10-04T23:54:00.369Z","updatedAt":"2021-10-05T17:21:21.313Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":3,"locale":"en-US"},"fields":{"title":"Sharing - monolith and physical databases","description":"A hand-drawn diagram depicts one cylindrical database, labeled \"Monolith\", containing colored tables block, space, and comment. Below the monolith, arrows point to three smaller databases, each containing three rows of block, space, and comment tables. The smaller databases are labeled to indicate that there are 32 physical databases in total, with each database containing 15 logical shards.","file":{"url":"//images.ctfassets.net/spoqsaf9291f/eSDWC4QLGQHwbGEOTWwDu/f750016a561cfb7e9c157f83b71f08b0/sharding-illustration-1.png","details":{"size":311854,"image":{"width":2000,"height":1450}},"fileName":"sharding-illustration-1.png","contentType":"image/png"}}},"description":"We went from a single database containing every table to a fleet of 32 physical databases, each containing 15 logical shards, each shard containing one of each sharded table. In total, we had 480 logical shards.","presentation":"Border"}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We chose to construct ","marks":[],"data":{}},{"nodeType":"text","value":"schema001.block","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", ","marks":[],"data":{}},{"nodeType":"text","value":"schema002.block","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", etc. as ","marks":[],"data":{}},{"nodeType":"text","value":"separate tables","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":", rather than maintaining a single ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"partitioned","marks":[],"data":{}}],"data":{"uri":"https://www.postgresql.org/docs/10/ddl-partitioning.html"}},{"nodeType":"text","value":" ","marks":[],"data":{}},{"nodeType":"text","value":"block","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" table per database with 15 child tables. Natively partitioned tables introduce another piece of routing logic:","marks":[],"data":{}}],"data":{}},{"nodeType":"ordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Application code: workspace ID → physical database.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Partition table: workspace ID → logical schema.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"4ohNwPh6kVdssA4QS6zxPP","type":"Entry","createdAt":"2021-10-05T00:09:49.286Z","updatedAt":"2021-10-05T17:20:47.962Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Sharding illustration 2","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"29AxG8gsvNFoC0UJGb8UcB","type":"Asset","createdAt":"2021-10-05T00:08:12.117Z","updatedAt":"2021-10-05T17:21:01.184Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"locale":"en-US"},"fields":{"title":"Sharding illustration 2","description":"An illustration of Notion windows moving into sharding databases.","file":{"url":"//images.ctfassets.net/spoqsaf9291f/29AxG8gsvNFoC0UJGb8UcB/da0cff1d162b846b43df44694a97d83d/sharding-illustration-2.png","details":{"size":182358,"image":{"width":2000,"height":1200}},"fileName":"sharding-illustration-2.png","contentType":"image/png"}}},"description":"Keeping separate tables allowed us to route directly from the application to a specific database and logical shard. ","presentation":"Border","hideCaption":false}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We wanted a single source of truth for routing from a workspace ID to a logical shard, so we opted to construct the tables separately and perform all routing in the application.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Migrating to shards","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Once we established our sharding scheme, it was time to implement it. For any migration, our general framework goes something like this:","marks":[],"data":{}}],"data":{}},{"nodeType":"ordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Double-write:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Incoming writes get applied to both the old and new databases.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Backfill:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Once double-writing has begun, migrate the old data to the new database.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Verification:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Ensure the integrity of data in the new database.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Switch-over:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Actually switch to the new database. This can be done incrementally, e.g. double-reads, then migrate all reads.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Double-writing with an audit log","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The double-write phase ensures that new data populates both the old and new databases, even if the new database isn’t yet being used. There are several options for double-writing:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Write directly to both databases:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Seemingly straightforward, but any issue with either write can quickly lead to inconsistencies between databases, making this approach too flaky for critical-path production datastores.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Logical replication:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Built-in ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Postgres functionality","marks":[],"data":{}}],"data":{"uri":"https://www.postgresql.org/docs/10/logical-replication.html"}},{"nodeType":"text","value":" that uses a publish/subscribe model to broadcast commands to multiple databases. Limited ability to modify data between source and target databases.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Audit log and catch-up script:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Create an audit log table to keep track of all writes to the tables under migration. A catch-up process iterates through the audit log and applies each update to the new databases, making any modifications as needed.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We chose the ","marks":[],"data":{}},{"nodeType":"text","value":"audit log","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" strategy over logical replication, since the latter struggled to keep up with ","marks":[],"data":{}},{"nodeType":"text","value":"block","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" table write volume during the ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"initial snapshot","marks":[],"data":{}}],"data":{"uri":"https://www.postgresql.org/docs/10/logical-replication-architecture.html#LOGICAL-REPLICATION-SNAPSHOT"}},{"nodeType":"text","value":" step.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"3uVyImXmF9HRFSwWOaF8u1","type":"Entry","createdAt":"2021-10-05T00:11:06.570Z","updatedAt":"2021-10-05T00:11:06.570Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"callout"}},"locale":"en-US"},"fields":{"title":"sharding callout 4","style":"Tip","body":{"data":{},"content":[{"data":{},"content":[{"data":{},"marks":[],"value":"We also prepared and tested a ","nodeType":"text"},{"data":{},"marks":[{"type":"bold"}],"value":"reverse audit log","nodeType":"text"},{"data":{},"marks":[],"value":" and script in case we needed to switch ","nodeType":"text"},{"data":{},"marks":[{"type":"italic"}],"value":"back","nodeType":"text"},{"data":{},"marks":[],"value":" from shards to the monolith. This script would capture any incoming writes to the sharded database, and allow us to replay those edits on the monolith. In the end, we didn't need to revert, but it was an important piece of our contingency plan.","nodeType":"text"}],"nodeType":"paragraph"}],"nodeType":"document"},"toggle":false,"hideTitle":true}}}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Backfilling old data","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Once incoming writes were successfully propagating to the new databases, we initiated a backfill process to migrate all existing data. With all 96 CPUs (!) on the ","marks":[],"data":{}},{"nodeType":"text","value":"m5.24xlarge","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" instance we provisioned, our final script took around three days to backfill the production environment.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Any backfill worth its salt should ","marks":[],"data":{}},{"nodeType":"text","value":"compare record versions","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" before writing old data, skipping records with more recent updates. By running the catch-up script and backfill in any order, the new databases would eventually converge to replicate the monolith.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Verifying data integrity","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Migrations are only as good as the integrity of the underlying data, so after the shards were up-to-date with the monolith, we began the process of ","marks":[],"data":{}},{"nodeType":"text","value":"verifying correctness","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":".","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Verification script:","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Our script verified a contiguous range of the UUID space starting from a given value, comparing each record on the monolith to the corresponding sharded record. Because a full table scan would be prohibitively expensive, we randomly sampled UUIDs and verified their adjacent ranges.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"“Dark” reads: ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"Before migrating read queries, we added a flag to fetch data from both the old and new databases (known as ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"dark reading","marks":[],"data":{}}],"data":{"uri":"https://slack.engineering/re-architecting-slacks-workspace-preferences-how-to-move-to-an-eav-model-to-support-scalability/"}},{"nodeType":"text","value":"). We compared these records and discarded the sharded copy, logging discrepancies in the process. Introducing dark reads increased API latency, but provided confidence that the switch-over would be seamless.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"As a precaution, the ","marks":[],"data":{}},{"nodeType":"text","value":"migration and verification logic were implemented by different people","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":". Otherwise, there was a greater chance of someone making the same error in both stages, weakening the premise of verification.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Difficult lessons learned","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"While much of the sharding project captured Notion’s engineering team at its best, there were many decisions we would reconsider in hindsight. Here are a few examples:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Shard earlier.","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" As a small team, we were keenly aware of the tradeoffs associated with premature optimization. However, we waited until our existing database was heavily strained, which meant we had to be very frugal with migrations lest we add even more load. This limitation kept us from using ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"logical replication","marks":[],"data":{}}],"data":{"uri":"https://www.postgresql.org/docs/10/logical-replication.html"}},{"nodeType":"text","value":" to double-write. The workspace ID —our partition key— was not yet populated in the old database, and ","marks":[],"data":{}},{"nodeType":"text","value":"backfilling this column would have exacerbated the load","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" on our monolith. Instead, we backfilled each row on-the-fly when writing to the shards, requiring a custom catch-up script.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Aim for a zero-downtime migration.","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Double-write throughput was the primary bottleneck in our final switch-over: once we took the server down, we needed to let the catch-up script finish propagating writes to the shards. Had we spent another week optimizing the script to spend \u003c30 seconds catching up the shards during the switch-over, it may have been possible to hot-swap at the load balancer level without downtime.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Introduce a combined primary key instead of a separate partition key.","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" Today, rows in sharded tables use a composite key: ","marks":[],"data":{}},{"nodeType":"text","value":"id","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", the primary key in the old database; and ","marks":[],"data":{}},{"nodeType":"text","value":"space_id","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", the partition key in the current arrangement. Since we had to do a full table scan anyway, we could’ve combined both keys into a single new column, eliminating the need to pass ","marks":[],"data":{}},{"nodeType":"text","value":"space_ids","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" throughout the application.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Despite these what-ifs, sharding was a tremendous success. For Notion users, a few minutes of downtime made the product tangibly faster. Internally, we demonstrated coordinated teamwork and decisive execution given a time-sensitive goal.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"If urgent timelines don’t stop you from thinking rigorously about long-term technical implications, we’d love to chat — ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"join us","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/jobs"}},{"nodeType":"text","value":"!","marks":[],"data":{}}],"data":{}}]},"colophon":{"data":{},"content":[{"data":{},"content":[{"data":{},"marks":[{"type":"bold"}],"value":"Footnotes","nodeType":"text"}],"nodeType":"paragraph"},{"data":{},"content":[{"data":{},"marks":[],"value":"[1] Besides introducing needless complexity, an underrated danger of premature sharding is that it can constrain the product model before it has been well-defined on the business side. For example, if a team shards by user and subsequently pivots to a team-focused product strategy, the architectural impedance mismatch can cause significant technical pain and even constrain certain features.","nodeType":"text"}],"nodeType":"paragraph"},{"data":{},"content":[{"data":{},"marks":[],"value":"[2] In addition to packaged solutions, we considered a number of alternatives: switching to another database system such as DynamoDB (deemed too risky for our use case), and running Postgres on bare-metal ","nodeType":"text"},{"data":{"uri":"https://aws.amazon.com/ec2/instance-types/i3en/"},"content":[{"data":{},"marks":[],"value":"NVMe heavy instances","nodeType":"text"}],"nodeType":"hyperlink"},{"data":{},"marks":[],"value":" for greater disk throughput (rejected due to the maintenance cost of backups and replication).","nodeType":"text"}],"nodeType":"paragraph"},{"data":{},"content":[{"data":{},"marks":[],"value":"[3] Besides key-based partitioning, which divides data based on some attribute, there are ","nodeType":"text"},{"data":{"uri":"https://www.startuplessonslearned.com/2009/01/sharding-for-startups.html?m=1#comment-form"},"content":[{"data":{},"marks":[],"value":"other","nodeType":"text"}],"nodeType":"hyperlink"},{"data":{},"marks":[],"value":" ","nodeType":"text"},{"data":{"uri":"http://highscalability.com/blog/2009/8/6/an-unorthodox-approach-to-database-design-the-coming-of-the.html"},"content":[{"data":{},"marks":[],"value":"approaches","nodeType":"text"}],"nodeType":"hyperlink"},{"data":{},"marks":[],"value":": ","nodeType":"text"},{"data":{},"marks":[{"type":"italic"}],"value":"vertical partitioning","nodeType":"text"},{"data":{},"marks":[],"value":" by service, and ","nodeType":"text"},{"data":{},"marks":[{"type":"italic"}],"value":"directory-based partitioning","nodeType":"text"},{"data":{},"marks":[],"value":" using an intermediate lookup table to route all reads and writes.","nodeType":"text"}],"nodeType":"paragraph"}],"nodeType":"document"}}},{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5TbB0ymLogGilOT14w84df","type":"Entry","createdAt":"2021-09-02T16:57:12.700Z","updatedAt":"2021-09-02T17:36:21.327Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"Migrating Notion's marketing site to Next.js","slug":"migrating-notion-marketing-to-next-js","subtitle":"Improving performance and user experience by moving from a client-rendered marketing site to a static site generated by Next.js.","publishedAt":"2021-08-11T16:00-07:00","people":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"3gYEIxCmvMHK6rPsYXo61t","type":"Entry","createdAt":"2020-10-01T23:00:31.611Z","updatedAt":"2021-09-02T17:00:26.416Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"person"}},"locale":"en-US"},"fields":{"name":"Cory Etzkorn","jobTitle":"Design \u0026 Engineering","company":"Notion","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"4U2WN38mzXwqpkgG4S3Luu","type":"Asset","createdAt":"2020-10-01T23:00:13.533Z","updatedAt":"2020-10-01T23:00:13.533Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Cory Etzkorn portrait","file":{"url":"//images.ctfassets.net/spoqsaf9291f/4U2WN38mzXwqpkgG4S3Luu/d425f12e8a2a0130e0b24a5dc5398cd9/CorySpeakerPortrait.png","details":{"size":205555,"image":{"width":1000,"height":1000}},"fileName":"CorySpeakerPortrait.png","contentType":"image/png"}}},"url":"https://twitter.com/coryetzkorn"}}],"topic":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5fBleQPwPVEQHmNv3bCt0q","type":"Entry","createdAt":"2021-05-17T19:44:24.367Z","updatedAt":"2021-07-09T18:01:49.395Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"postTopic"}},"locale":"en-US"},"fields":{"title":"Tech","slug":"tech","description":"How we’re building Notion, block by block.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5eeQ1CWX51pw9WGoLFnLuS","type":"Asset","createdAt":"2021-05-17T19:35:55.048Z","updatedAt":"2021-05-17T19:35:55.048Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"blog-topic-tech","file":{"url":"//images.ctfassets.net/spoqsaf9291f/5eeQ1CWX51pw9WGoLFnLuS/1b195b7d9823e953f5de226eee289588/blog-topic-tech.png","details":{"size":9882,"image":{"width":200,"height":150}},"fileName":"blog-topic-tech.png","contentType":"image/png"}}},"order":3}}],"wordCount":2500,"thumbnail":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"ZAhop3UifQeNERDCSaAAp","type":"Asset","createdAt":"2021-08-31T19:14:51.238Z","updatedAt":"2021-08-31T19:15:27.058Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"locale":"en-US"},"fields":{"title":"Static site thumbnail","file":{"url":"//images.ctfassets.net/spoqsaf9291f/ZAhop3UifQeNERDCSaAAp/d3b11bc723baad3d4ccfb8bf6755fd4d/static-site-thumb.png","details":{"size":47033,"image":{"width":1200,"height":630}},"fileName":"static-site-thumb.png","contentType":"image/png"}}},"body":{"nodeType":"document","data":{},"content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"One of the most challenging aspects of being an engineer is knowing when to introduce abstractions and when to keep things simple. How many times have you invested time in building a scalable system up front, planning for growth that never comes to fruition? We're certainly no stranger to this age-old engineering dilemma.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"1Qm0C8OdeViVSktDJlROY7","type":"Entry","createdAt":"2021-09-02T16:53:26.884Z","updatedAt":"2021-09-02T16:53:26.884Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Bunny with carrot","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7r2dO2oq0MEiCaSBGz49Dx","type":"Asset","createdAt":"2021-09-02T16:53:24.387Z","updatedAt":"2021-09-02T16:53:24.387Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"bunny-with-carrot","file":{"url":"//images.ctfassets.net/spoqsaf9291f/7r2dO2oq0MEiCaSBGz49Dx/1a501189df8b719fb31539bc8175ddd4/bunny-with-carrot.png","details":{"size":45044,"image":{"width":1200,"height":360}},"fileName":"bunny-with-carrot.png","contentType":"image/png"}}},"description":"A bunny carrying a carrot","presentation":"Unstyled","hideCaption":true,"disableZoom":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"At the end of 2020, however, we decided the time had come to invest in scalable systems that would help propel our marketing efforts into the future. Our content team had begun frequently publishing ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"blog posts","marks":[],"data":{}}],"data":{"uri":"/blog"}},{"nodeType":"text","value":", ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"guides","marks":[],"data":{}}],"data":{"uri":"/guides"}},{"nodeType":"text","value":", and spinning up various new landing pages. We were creating a large amount of content to support our rapidly growing user base, but at the same time were concerned that performance issues were preventing us from reaching our full audience.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We rebuilt our entire marketing site from scratch, choosing to go with a statically generated architecture over our former purely client-rendered approach. Two months and 109 React components later, we've now fully migrated to our framework of choice, ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Next.js","marks":[],"data":{}}],"data":{"uri":"https://nextjs.org"}},{"nodeType":"text","value":", and couldn't be happier with our decision. Here's how we got there.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Where we started","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"In the early days of Notion, we chose to build our marketing site as an extension of our core app. We leveraged existing components and infrastructure so we could ship big with a small team. This approach served us well for about two years, but over time the productivity benefits we enjoyed were overshadowed by the many technical and user-facing problems associated with this approach.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The core benefit of our original client-rendered approach was developer experience. Our app and marketing site shared one large folder of React components. If we needed a popup menu on the marketing site, it was likely an existing component from the app could be reused. Shared code also enabled some interesting user experiences, like the ability to embed the full app in the marketing site as a live demo.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"1PKakwZxfNxAaOZc2AsRin","type":"Entry","createdAt":"2021-09-02T16:53:39.441Z","updatedAt":"2021-09-02T16:53:39.441Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Static site – live demo","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"32X34yOP9q3c68KFyyyW6f","type":"Asset","createdAt":"2021-09-02T16:53:36.920Z","updatedAt":"2021-09-02T16:53:36.920Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"live-demo","file":{"url":"//images.ctfassets.net/spoqsaf9291f/32X34yOP9q3c68KFyyyW6f/2641255d16064b9e95862932148e544b/live-demo.png","details":{"size":214462,"image":{"width":1400,"height":874}},"fileName":"live-demo.png","contentType":"image/png"}}},"description":"Sharing client app and marketing code enabled an embedded live product demo.","presentation":"Desktop App","hideCaption":false,"disableZoom":false}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Eventually, the developer experience degraded. We felt like we were inheriting complexity from the app when implementing even small things on the marketing site. For example, we might import a button component from the app that looked like this:","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"RMHtct8ZNKH6QBVVLaNIc","type":"Entry","createdAt":"2021-09-02T16:56:35.916Z","updatedAt":"2021-09-02T16:56:35.916Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"code"}},"locale":"en-US"},"fields":{"name":"Static site button – before","body":"```jsx\n\u003cButton \n  variant=\"marketingPrimary\"\n  onClick={() =\u003e soSomething()}\n  mobileFeedback={() =\u003e doSomething()}\n  allowTextSelection={() =\u003e doSomething()}\n  onDoubleClick={() =\u003e doSomething()}\n  onTouchStart={() =\u003e doSomething()}\n  onTouchEnd={() =\u003e doSomething()}\n  onTouchCancel={() =\u003e doSomething()}\n  onContextMenu={() =\u003e doSomething()}\n\u003e\n```"}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"When all we really needed for marketing purposes was a button with a few props like this:","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7exwGloUzBflaksnVb0bqR","type":"Entry","createdAt":"2021-09-02T16:56:29.985Z","updatedAt":"2021-09-02T16:56:29.985Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"code"}},"locale":"en-US"},"fields":{"name":"Static site button - after","body":"```jsx\n\u003cButton\n  variant=\"primary\"\n  onClick={() =\u003e doSomething()}\n\u003e\n```"}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"It got to a point where we felt our entire codebase would be easier to maintain by splitting the app and marketing site apart. Marketing teams need to be nimble and our existing setup held us back.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"On top of the engineering problems, our implementation was causing a slew of user-facing problems. To name just a few:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"JS bundle size ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— on initial load of the marketing site, visitors were forced to download a 9.1mb app.js file that contained code for the entire app. Very little of this code was marketing-related.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"SEO ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— since pages were only client-rendered, crawling by search engines was dubious at best. Google has gotten better at crawling client-side JS, but nothing beats a static or server-rendered page.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Content management ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— without a build system, requests had to be made to our content management system's (Contentful) API on every client-side visit. This resulted in millions of unneeded API calls and loading spinners on otherwise straightforward marketing pages.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Performance ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— for the reasons above, our Google Lighthouse score for marketing pages hovered around 50/100.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The combination of these engineering and user experience issues made it clear that we needed a new, more scalable approach.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Exploring solutions","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Like all big decisions at Notion, our decision to integrate a static site generator began with an RFC (a “request for comment,” where we ask the broader team for feedback) in our docs database.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"6rQLM2kH2sZyFoRLeSGuy","type":"Entry","createdAt":"2021-09-02T16:56:20.858Z","updatedAt":"2021-09-02T16:56:20.858Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"richTextLayout"}},"locale":"en-US"},"fields":{"layout":"Center","width":"Medium","content":[{"sys":{"type":"Link","linkType":"Entry","id":"241tG4v9bplVQi7O5lPv02"}},{"sys":{"type":"Link","linkType":"Entry","id":"5XP33HNvTaRpDRIukoAGKn"}}]}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"After documenting the problems we were experiencing, we were faced with two divergent paths forward.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"1. Optimize existing client-side codebase","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"In this scenario, we'd build on top of what we already had instead of forging an entirely new path. This work would include:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Using code splitting to reduce marketing JS bundle size.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Implementing better asset caching to reduce page weight.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Creating a distinction between marketing and app components to reduce inherited complexity and risk of marketing bugs affecting the app.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Sticking to client-side rendering in hopes performance improvements alone would improve SEO.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"2. Migrate to a static site generator","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"This approach would mean starting from scratch so we could leverage the full benefits of a static site. The work would include:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Rebuilding the marketing site using a JS-based static site generator such as Gatsby or Next.js.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Migrating approximately 109 React components.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Configuring a new build and deployment process.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Rethinking our editorial workflows.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Routing requests to notion.so between a separate client and marketing router.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"No matter which path we chose, there'd be work ahead. Weighing the pros and cons, we felt the extra investment required to go fully static would pay long term dividends for both user experience and developer productivity. It would let us be nimble.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Choosing a static site generator","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We kicked off the next phase of the RFC process by writing down our desires for our new static site. Seeing our needs written down helped illuminate the problems we hoped to solve. We didn't want to pick the shiniest new tool off the shelf unless it truly aligned with our goals.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Our static site wishlist","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"React-based ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— our ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"apps are powered by React","marks":[],"data":{}}],"data":{"uri":"/blog/data-model-behind-notion"}},{"nodeType":"text","value":". Our marketing site should use the same technology.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"TypeScript support ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— our entire codebase has benefited greatly from static typing. This power should be extended to the marketing site. We also have bits of code and logic that still need to be shared between the app and marketing site.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Contentful integration ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— our content lives here and needs to integrate seamlessly.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Localization ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— a large percentage of Notion users reside outside of the US. Our marketing site needs to be fully localized to create a better experience for those customers.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Full CSS support ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— we need the ability to use pseudo-selectors and modern techniques that cannot be expressed via inline styles.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Publishing workflow ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— our content creators need a way to preview their work before publishing.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Future-proof ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— this is a big investment and we need to be confident the framework we choose is here to stay.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"These parameters naturally narrowed down to just a few contenders.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Why we picked Next.js","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"3514uJoz7TLCteBoIKJbRE","type":"Entry","createdAt":"2021-09-02T16:55:48.732Z","updatedAt":"2021-09-02T16:55:48.732Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Static site - Next.js homepage","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"43KP5U4CikeNkSoqpQ8zXL","type":"Asset","createdAt":"2021-09-02T16:55:45.128Z","updatedAt":"2021-09-02T16:55:45.128Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"next-js homepage","file":{"url":"//images.ctfassets.net/spoqsaf9291f/43KP5U4CikeNkSoqpQ8zXL/6d401a64217899c5f7d59e6ab541166a/next-js.png","details":{"size":210722,"image":{"width":1984,"height":1304}},"fileName":"next-js.png","contentType":"image/png"}}},"description":"Next.js powers our new static marketing site.","presentation":"Desktop App","hideCaption":false,"disableZoom":false}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"After a thorough review and proof-of-concept built in Next.js, we realized there was a lot to love:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The framework is lightweight and declarative in nature. It handles the important things: routing, code splitting, static generation, localization, and image optimization. After that it gets out of the way.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Full TypeScript support.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"docs","marks":[],"data":{}}],"data":{"uri":"https://nextjs.org/docs/getting-started"}},{"nodeType":"text","value":" and ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"code examples","marks":[],"data":{}}],"data":{"uri":"https://github.com/vercel/next.js/tree/canary/examples"}},{"nodeType":"text","value":" are excellent and left us feeling supported in the migration.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Server-side rendering","marks":[],"data":{}}],"data":{"uri":"https://nextjs.org/docs/api-reference/data-fetching/getInitialProps"}},{"nodeType":"text","value":" wasn't something we initially needed, but we were excited to have it in our toolbox for future use.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Internationalized routing","marks":[],"data":{}}],"data":{"uri":"https://nextjs.org/docs/advanced-features/i18n-routing#locale-strategies"}},{"nodeType":"text","value":" comes out of the box. A huge time saver.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"The image component","marks":[],"data":{}}],"data":{"uri":"https://nextjs.org/docs/api-reference/next/image"}},{"nodeType":"text","value":" can integrate with CloudFlare to cache assets and improve performance.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"In nearly every arena, Next.js aligned with our technical goals.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Building the static site","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Migrating our marketing site to an entirely new framework was a gigantic undertaking. It required the contributions of three engineers off and on over the course of two months. Together we migrated and refactored:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"200k+ lines of code","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"109 React components","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"23 static pages","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"129 dynamically generated pages","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"2 locales","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The migration process was smooth — which mostly involved copy / pasting code or modifying functionality to follow Next.js best practices. But there were a few areas that required extra attention and consideration.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Version control","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Our entire codebase lives in a single monorepo. The web app, desktop apps, mobile apps — everything. We briefly considered starting a new repo specifically for the marketing site. The main benefit being that the marketing team could deploy autonomously to a static hosting platform like ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Vercel","marks":[],"data":{}}],"data":{"uri":"https://vercel.com/"}},{"nodeType":"text","value":".","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Our intention was to split up the app and the marketing site, but we found separate repos unnecessary. We did end up fulfilling our dream of having a separate set of components just for marketing, but we still needed access to some shared resources. Things like analytics events, APIs, and helper methods needed to be kept in sync. Thus, we chose to stick with our monorepo and sort out deployment ourselves.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Routing","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Adding Next.js to our stack meant we needed a way for our main client router to be aware of our new statically generated routes. Our client app and marketing site live on the same domain, making things a bit more complicated. Luckily, the solution ended up being rather straightforward.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We set up a reverse proxy that works like this:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"A request comes into notion.so.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The API server inspects the request and parses out the path and user agent.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We check the request's path against an allow-list of known marketing subpaths.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"If the path and user agent qualify as a marketing route, we forward the request to our marketing service.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"If the path and user agent qualify as an app route, the api server handles the request directly.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"This approach allows us to maintain custom routing in the client app while also taking advantage of Next.js's dynamically generated marketing routes.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Hosting \u0026 deployment","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"To take advantage of some of the best Next.js features, our marketing site lives in its own Docker container and is deployed to AWS ECS. Having a full server environment enables features like ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"preview mode","marks":[],"data":{}}],"data":{"uri":"https://nextjs.org/docs/advanced-features/preview-mode"}},{"nodeType":"text","value":", ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"internationalized routing","marks":[],"data":{}}],"data":{"uri":"https://nextjs.org/docs/advanced-features/i18n-routing#sub-path-routing"}},{"nodeType":"text","value":", and ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"SSR","marks":[],"data":{}}],"data":{"uri":"https://nextjs.org/docs/api-reference/data-fetching/getInitialProps"}},{"nodeType":"text","value":".","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Logging in production ended up being more challenging than expected. We created a ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"custom server entry point","marks":[],"data":{}}],"data":{"uri":"https://jake.tl/notes/2021-04-04-nextjs-preload-hack"}},{"nodeType":"text","value":" specifically for error handling and performance monitoring.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"CSS","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"One of the biggest pain points of our previous marketing codebase was how we handled styles. The app primarily uses React style props. Styles are generally returned from functions:","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5F3zk7cP1npZZT4MVfI4Hy","type":"Entry","createdAt":"2021-09-02T16:55:08.273Z","updatedAt":"2021-09-02T16:55:08.273Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"code"}},"locale":"en-US"},"fields":{"name":"Static site CSS - before","body":"```ts\nclass Button extends React.Component {\n  // isHovered stored in component state up here\n  render() {\n    return (\n      \u003cbutton \n        onMouseEnter={setIsHovered(true)}\n        onMouseLeave={setIsHovered(false)}\n        style={getButtonStyle(isHovered)}\u003e\n        Log in\n      \u003c/button\u003e\n    )\n  }\n  private getButtonStyle(isHovered: boolean): CSSProperties {\n    return {\n      height: 45,\n      background: isHovered ? this.theme.buttonHoverColor : this.theme.buttonColor,\n      fontSize: 16,\n      fontWeight: bold,\n    }\n  }\n}\n```"}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"This approach works great for a complex app like Notion where a large portion of styles need to be computed at runtime, but it's less suitable for a marketing site with a more traditional publishing use-case.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Our marketing codebase now uses ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Styled JSX","marks":[],"data":{}}],"data":{"uri":"https://github.com/vercel/styled-jsx"}},{"nodeType":"text","value":" instead of inline styles. It looks like this:","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"3spWRLJbo7DhyAJtCimlWL","type":"Entry","createdAt":"2021-09-02T16:55:00.483Z","updatedAt":"2021-09-02T16:55:00.483Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"code"}},"locale":"en-US"},"fields":{"name":"Static site CSS - after","body":"```ts\nconst Button: FunctionComponent = () =\u003e {\n  const theme = useTheme()\n  return (\n    \u003c\u003e\n      \u003cbutton\u003eLog in\u003c/button\u003e\n      \u003cstyle jsx\u003e{`\n        button {\n          height: 45px;\n          background: ${theme.buttonColor};\n          font-size: 16px;\n          font-weight: bold;\n        }\n        button:hover {\n          background: ${theme.buttonHoverColor};\n        }\n      `}\u003c/style\u003e\n    \u003c/\u003e\n  )\n}\n```"}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We were overwhelmed by the number of great CSS-in-JS options available and it was hard to choose just one. We've been extremely happy with Styled JSX for a few reasons:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We get to write full, real CSS! Things like pseudo-selectors and media queries \"just work.\"","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Styles are component-scoped by default, eliminating nasty specificity bugs.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"It works out-of-the-box in Next.js. No additional packages are needed.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We can still interpolate values from JS as needed.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Our new approach to CSS has cut the development time of landing pages in half and has allowed us to style more expressively.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Making the switch","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"51ZXHlIhzRASCBCqLJDWET","type":"Entry","createdAt":"2021-09-02T16:57:02.846Z","updatedAt":"2021-09-02T16:57:02.846Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Static site - PR diff","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"3Rodn5ES9ms7WpA8sSS4TJ","type":"Asset","createdAt":"2021-09-02T16:56:59.736Z","updatedAt":"2021-09-02T16:56:59.736Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"final-pr-diff","file":{"url":"//images.ctfassets.net/spoqsaf9291f/3Rodn5ES9ms7WpA8sSS4TJ/408b8b3e546dc4fe7f9540eac5769902/final-pr-diff.png","details":{"size":6687,"image":{"width":1400,"height":240}},"fileName":"final-pr-diff.png","contentType":"image/png"}}},"description":"One of our final PR diffs removing a bunch of old code.","presentation":"Border","hideCaption":false,"disableZoom":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The most challenging aspect of this project was the sheer scale of it. We not only had to rebuild large portions of our site, but also maintain and update the existing site at the same time.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"To make this possible, there were a few technical considerations:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The new static site was developed in the same repo. Any external dependencies stayed in sync throughout the build.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We hid the new routing logic behind an experiment, allowing us to turn on the new site in our dev environment and keep it off in production.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"When it came time to launch, we were able to ramp up traffic to the experiment over a period of two weeks to ensure everything worked as expected.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"This approach made the transition completely seamless and resulted in zero downtime.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"The results","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"After two months of intense migration work, it was beyond exciting to share this message internally with the team on launch day:","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"2I5RyhRDyA9EdvFqzVj3Qa","type":"Entry","createdAt":"2021-09-02T16:54:48.738Z","updatedAt":"2021-09-02T16:54:48.738Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Static site - Slack announcement","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"6meOgS9g9n8CLHQtcz7f33","type":"Asset","createdAt":"2021-09-02T16:54:46.524Z","updatedAt":"2021-09-02T16:54:46.524Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"static-site-announcement","file":{"url":"//images.ctfassets.net/spoqsaf9291f/6meOgS9g9n8CLHQtcz7f33/d66a04186d4757317beef969832315cf/static-site-announcement.png","details":{"size":94176,"image":{"width":1400,"height":380}},"fileName":"static-site-announcement.png","contentType":"image/png"}}},"description":"Message posted in Slack announcing static site launch.","presentation":"Border","hideCaption":true,"disableZoom":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"It was a funny message to share because, to the naked eye, nothing on our site had really changed. We intentionally chose to limit the scope of this project to migration and performance improvements. Adding a layer of design polish would have complicated the process and made it more challenging to measure results.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"So what were the results? A whole bunch of incredible quantitative and qualitative improvements.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5SoNM9mCRs8m8vFk2HE5QJ","type":"Entry","createdAt":"2021-09-02T16:54:36.363Z","updatedAt":"2021-09-02T16:54:36.363Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Static site - Lighthouse score","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"1ThzGcTmaKSppejsvWXoFL","type":"Asset","createdAt":"2021-09-02T16:54:33.619Z","updatedAt":"2021-09-02T16:54:33.619Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"notion-lighthouse-after","file":{"url":"//images.ctfassets.net/spoqsaf9291f/1ThzGcTmaKSppejsvWXoFL/10779928fcfcf49a3d5cf3deedf10551/notion-lighthouse-after.png","details":{"size":316855,"image":{"width":2880,"height":1800}},"fileName":"notion-lighthouse-after.png","contentType":"image/png"}}},"description":"Our new Google Lighthouse score for notion.so/product.","presentation":"Desktop App","hideCaption":false,"disableZoom":false}}}},{"nodeType":"ordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Performance ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— we now have one of the best-performing marketing sites in the entire industry. Our previous Google Lighthouse performance score hovered around 50/100 for most pages. Our new score on ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"notion.so/product","marks":[],"data":{}}],"data":{"uri":"https://notion.so/product"}},{"nodeType":"text","value":" is 97/100. We plan to keep an eye on this metric and improve it even further.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"User experience ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— there is no longer a single loading spinner on the entire marketing site. Everything is pre-rendered, cached by a CDN, and delivered instantly. Performance is a feature!","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Page weight ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— the size of our initial required JavaScript is down 93% from 9.1mb to 847kb. Similar improvements are seen across the entire site. The total file size of ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"notion.so/product","marks":[],"data":{}}],"data":{"uri":"https://notion.so/product"}},{"nodeType":"text","value":" is down 75% from 12.5mb to 3.1mb.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"SEO ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— Google can now fully crawl and index our marketing pages.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Developer productivity ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— we can now make sweeping changes to the marketing codebase without worrying they'll cause trouble in the app. We can write full, modern CSS. Best of all, we can safely query any piece of content from our CMS, knowing that the majority of data fetching will happen at build time instead of at request.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"With our new, rock-solid foundation, we're excited for the marketing team's shipping cadence to accelerate significantly. We have big things planned — and we could use a little help making them a reality. Want to join us? Check out ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"notion.so/careers","marks":[],"data":{}}],"data":{"uri":"http://notion.so/careers"}},{"nodeType":"text","value":" for current openings.","marks":[],"data":{}}],"data":{}}]}}},{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5u9cj9q5Xzi4x4B5AkTGFu","type":"Entry","createdAt":"2021-05-18T18:59:01.424Z","updatedAt":"2021-05-18T19:26:45.575Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":3,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"post"}},"locale":"en-US"},"fields":{"title":"The data model behind Notion's flexibility","slug":"data-model-behind-notion","subtitle":"Notion’s data model enables the product’s most foundational component: blocks. Through blocks, we allow users more flexibility and better control over their information.","publishedAt":"2021-05-18T00:00-07:00","people":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7mqHT1KLyxn0WflB5zlTUP","type":"Entry","createdAt":"2021-05-17T19:19:55.937Z","updatedAt":"2021-05-17T19:19:55.937Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"person"}},"locale":"en-US"},"fields":{"name":"Jake Teton-Landis","jobTitle":"Engineering","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"4RVz8s4vxAVt71iF7W7PUS","type":"Asset","createdAt":"2021-05-17T19:18:30.979Z","updatedAt":"2021-05-17T19:19:51.128Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"locale":"en-US"},"fields":{"title":"Jake Teton-Landis","file":{"url":"//images.ctfassets.net/spoqsaf9291f/4RVz8s4vxAVt71iF7W7PUS/d47b8517195a7fcbdda9f312cc25480c/Jake.png","details":{"size":154660,"image":{"width":1000,"height":1000}},"fileName":"Jake.png","contentType":"image/png"}}}}}],"topic":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5fBleQPwPVEQHmNv3bCt0q","type":"Entry","createdAt":"2021-05-17T19:44:24.367Z","updatedAt":"2021-07-09T18:01:49.395Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"postTopic"}},"locale":"en-US"},"fields":{"title":"Tech","slug":"tech","description":"How we’re building Notion, block by block.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5eeQ1CWX51pw9WGoLFnLuS","type":"Asset","createdAt":"2021-05-17T19:35:55.048Z","updatedAt":"2021-05-17T19:35:55.048Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"blog-topic-tech","file":{"url":"//images.ctfassets.net/spoqsaf9291f/5eeQ1CWX51pw9WGoLFnLuS/1b195b7d9823e953f5de226eee289588/blog-topic-tech.png","details":{"size":9882,"image":{"width":200,"height":150}},"fileName":"blog-topic-tech.png","contentType":"image/png"}}},"order":3}}],"tags":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"2j2LpU21aSxlMeuWvInDFC","type":"Entry","createdAt":"2020-09-17T00:52:34.880Z","updatedAt":"2021-09-09T10:20:22.961Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"tag"}},"locale":"en-US"},"fields":{"name":"Engineering","slug":"engineering"}}],"wordCount":2500,"thumbnail":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"1qZYPcpXVBzoVmQjR9FZN2","type":"Asset","createdAt":"2021-05-17T16:28:32.140Z","updatedAt":"2021-09-29T00:30:39.490Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"locale":"en-US"},"fields":{"title":"Blocks technical architecture - thumbnail","description":"A model illustrating how blocks work in Notion.","file":{"url":"//images.ctfassets.net/spoqsaf9291f/1qZYPcpXVBzoVmQjR9FZN2/da600e17670e17a59c8af6e97a50f2fe/how-blocks-work.png","details":{"size":21484,"image":{"width":1200,"height":630}},"fileName":"how-blocks-work.png","contentType":"image/png"}}},"body":{"nodeType":"document","data":{},"content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"A ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"generation of pioneers","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/about"}},{"nodeType":"text","value":" (Doug Engelbart, Ted Nelson, Alan Kay, and many more) saw the computer as tool to augment human problem-solving by giving people power over information.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Today, that information mostly remains siloed across tools. Take cloud-based document editors, where pages are their smallest atomic unit. Information is locked inside of pages and files and folders — that’s reminiscent of how things were done a century ago. ","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We built Notion on a framework that allows information to stand on its own, free from any constraint or container, instead putting the power in the hands of the user at a granular level. That framework is built on blocks.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Everything you see in Notion is a block. Text, images, lists, a row in a database, even pages themselves — these are all blocks, dynamic units of information that can be transformed into other block types or moved freely within Notion. They’re the LEGOs we use to build and model information. And when put together, blocks are like LEGO sets, creating something much greater than the sum of their parts.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"This flexibility is at the heart of Notion’s mission. While blocks require our engineering team to apply extreme rigor when structuring information, we wanted an atomic, graph-like data model to provide our users with the ability to customize how their information is moved, organized, and shared.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The block model makes Notion unique, and it’s the foundation for how Notion thinks about bringing to life what pioneers thought computing, as a medium, could become.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Block basics","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Much like LEGO blocks in a LEGO set, Notion blocks are the singular pieces that represent all units of information inside the Notion editor. The attributes of a block determine how that information is rendered and organized.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"2YuVviBnnotwSoQOGChEhd","type":"Entry","createdAt":"2021-05-17T16:34:50.505Z","updatedAt":"2021-05-17T16:34:50.505Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - block demo","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7aiA3EDv0NUB4D6UokLVTU","type":"Asset","createdAt":"2021-05-17T16:34:23.348Z","updatedAt":"2021-05-17T16:34:23.348Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - block demo","file":{"url":"//images.ctfassets.net/spoqsaf9291f/7aiA3EDv0NUB4D6UokLVTU/4d743d0ba925de44ef85684346889643/blocks-2.png","details":{"size":73130,"image":{"width":1400,"height":532}},"fileName":"blocks-2.png","contentType":"image/png"}}},"description":"A visual representation of block attributes.","presentation":"Border","hideCaption":true,"disableZoom":false}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Every block has the following attributes:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"ID","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" — each block is uniquely identifiable by its ID. You can see the ID of page blocks at the end of the URL in your browser. We use randomly-generated UUIDs (UUID v4) for IDs in Notion.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Properties","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" — a data structure containing custom attributes about a specific block. The most common property is ","marks":[],"data":{}},{"nodeType":"text","value":"title","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", which stores the text content of block types like paragraphs, lists, and of course, the title of a page. More elaborate block types require additional or different properties, like a page block in a database with ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"user-defined properties","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/notion/Intro-to-databases-fd8cd2d212f74c50954c11086d85997e#6b755095caf3419fb544f2cc996fe926"}},{"nodeType":"text","value":".","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Type","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" — every block has a type, which defines how a block is displayed, and how the block’s properties are interpreted. Notion supports many types of blocks, most of which you can see in the “new block” menu that appears when you press the ","marks":[],"data":{}},{"nodeType":"text","value":"+","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" button or in the ","marks":[],"data":{}},{"nodeType":"text","value":"/","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" menu:","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"9fZScMce6iSXaU9km6z4o","type":"Entry","createdAt":"2021-05-17T16:39:27.228Z","updatedAt":"2021-05-17T16:39:27.228Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - slash menu","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5L1swXqfGVamYXDQddHvuH","type":"Asset","createdAt":"2021-05-17T16:39:20.406Z","updatedAt":"2021-05-17T16:39:20.406Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - slash menu","file":{"url":"//images.ctfassets.net/spoqsaf9291f/5L1swXqfGVamYXDQddHvuH/4363cceae29c8d3598062f00b8b7e1e7/Screen_Shot_2021-05-17_at_9.36.04_AM.png","details":{"size":178459,"image":{"width":1920,"height":1200}},"fileName":"Screen Shot 2021-05-17 at 9.36.04 AM.png","contentType":"image/png"}}},"description":"Using Notion’s slash menu, you can add different types of blocks to Notion pages.","presentation":"Desktop App","hideCaption":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"In addition to the attributes that describe the block itself, every block has attributes that define their relationship with other blocks:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Content","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" — an array (or ordered set) of block IDs representing the content inside this block, like nested bullet items in a bulleted list or the text inside a toggle.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Parent","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" — the block ID of the block’s parent. The parent block is only used for permissions.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"How blocks fit together","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Like LEGO blocks, Notion blocks can be combined with other blocks to make something much more powerful — like a roadmap that’s been totally customized to your team’s process, tracking progress and holding all project information in one place. We organize all aspects of blocks to make sure they do the right things and live in the right places, enabling users to connect them and further tailor Notion to solve their problems.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Type and properties","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The block type is what specifies how the block is rendered in Notion’s UI — and depending on that type, we interpret the block’s properties and content differently. You may be familiar with this if you've used the ","marks":[],"data":{}},{"nodeType":"text","value":"Turn into","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" function in Notion, which allows you to turn one block type into another.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Changing the type of a block doesn’t change the block’s properties or content — it only changes the type attribute. The information is just rendered differently, or even ignored if the property isn’t used by that block type.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"For example, you can see here that a ","marks":[],"data":{}},{"nodeType":"text","value":"To-do list","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" block is transformed into several other block types. We also check that ","marks":[],"data":{}},{"nodeType":"text","value":"To-do list","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" item. The “checked” property of the ","marks":[],"data":{}},{"nodeType":"text","value":"To-do list","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" block is ignored when the block is transformed into ","marks":[],"data":{}},{"nodeType":"text","value":"Heading","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" and ","marks":[],"data":{}},{"nodeType":"text","value":"Callout","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" block types — but by the time we come full circle to turn the block back into a ","marks":[],"data":{}},{"nodeType":"text","value":"To-do list","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" block, it is still checked.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5pnvGAmcPBE187d41ip5OY","type":"Entry","createdAt":"2021-05-17T16:50:20.427Z","updatedAt":"2021-05-17T16:50:20.427Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - changing block types","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"dLxIGH53bmM6zRJ43k02I","type":"Asset","createdAt":"2021-05-17T16:50:16.915Z","updatedAt":"2021-05-18T17:01:25.328Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":2,"locale":"en-US"},"fields":{"title":"Technical architecture - changing block types","file":{"url":"//videos.ctfassets.net/spoqsaf9291f/dLxIGH53bmM6zRJ43k02I/15f34f76ca60cebba348d57560a34020/changing_blocks.mp4","details":{"size":683275},"fileName":"changing blocks.mp4","contentType":"video/mp4"}}},"description":"Changing block types doesn’t change its properties.","presentation":"Desktop App","hideCaption":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Decoupling property storage from block type allows for efficient transformation and changes to our rendering logic. But it’s also essential for collaboration, because we preserve as much user intention as possible.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Content and the render tree","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The flexibility of the block model also allows blocks to be nested inside of other blocks, like text inside a toggle or infinitely nested sub-pages inside of pages. The content attribute of a block is what stores the array of block IDs (or pointers) referencing those nested blocks.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"4S56WFvRAxTOhG2yWKMzxQ","type":"Entry","createdAt":"2021-05-17T16:52:20.894Z","updatedAt":"2021-05-17T16:52:20.894Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - nested blocks","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"3In6K0C1YjjNeOWnFgesSG","type":"Asset","createdAt":"2021-05-17T16:52:16.606Z","updatedAt":"2021-05-17T16:52:16.606Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - nested blocks","file":{"url":"//images.ctfassets.net/spoqsaf9291f/3In6K0C1YjjNeOWnFgesSG/7e16eb7387df1d9dfe319871c107b8cc/blocks-2b.png","details":{"size":69663,"image":{"width":1400,"height":532}},"fileName":"blocks-2b.png","contentType":"image/png"}}},"description":"A visual representation of blocks nested inside of other blocks.","presentation":"Border","hideCaption":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"In the to-do list example, we have a ","marks":[],"data":{}},{"nodeType":"text","value":"To-do list","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" block (“Write a blog post about blocks”) with three block IDs in its content array. We think of these IDs as “downward pointers,” and call the blocks that they refer to “content” or “render children.”","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"6Nhbtnga8eV7SVRi7cf1oL","type":"Entry","createdAt":"2021-05-17T16:53:36.646Z","updatedAt":"2021-05-17T16:53:36.646Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - render tree","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"3q05C3cpoP2BwkZ0i4j9lO","type":"Asset","createdAt":"2021-05-17T16:53:32.647Z","updatedAt":"2021-05-17T16:53:32.647Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - render tree","file":{"url":"//images.ctfassets.net/spoqsaf9291f/3q05C3cpoP2BwkZ0i4j9lO/25c6a5c9d591b1a6b61349272394b11b/blocks-3.png","details":{"size":51094,"image":{"width":1400,"height":544}},"fileName":"blocks-3.png","contentType":"image/png"}}},"description":"A visual representation of a render tree for blocks in a page.","presentation":"Border","hideCaption":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Each block defines the position and order in which its content blocks are rendered. We call this hierarchical relationship between blocks and their render children the “render tree.” But, it doesn't look like a tree with branches — different block types render their children in different ways.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Here are a few examples of how the content attribute is rendered by different block types:","marks":[],"data":{}}],"data":{}},{"nodeType":"unordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"List blocks","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" — ","marks":[],"data":{}},{"nodeType":"text","value":"Text","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", ","marks":[],"data":{}},{"nodeType":"text","value":"Bulleted list","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", and ","marks":[],"data":{}},{"nodeType":"text","value":"To-do list","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":". List blocks display their content indented.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Toggles","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":" — ","marks":[],"data":{}},{"nodeType":"text","value":"Toggle list","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" blocks only display content when expanded. Otherwise, they only display the title property.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Pages ","marks":[{"type":"bold"}],"data":{}},{"nodeType":"text","value":"— ","marks":[],"data":{}},{"nodeType":"text","value":"Page","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" blocks display their content in a new page, instead of rendering it indented in the current page. To see this content, you would need to click into the new page.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Structurally, this continues to bring power to your information by allowing you to manipulate blocks at the most granular level. It’s a concept that preserves user intent of how information should be organized and displayed when working with other information.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Editing the render tree","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Have you ever been surprised by how indentation works in Notion? In conventional word processors, indentation is presentational: it only affects the spacing of text from the margins. In Notion, indentation is structural: it’s a reflection of the structure of the render tree. In other words, when you indent something in Notion, you are manipulating relationships between blocks and their content, not just adding a style.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"For example, pressing indent in a content block tries to add that block to the content of the nearest sibling block in the content tree.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"1MwXRCYVSizy5V1nwtXWM7","type":"Entry","createdAt":"2021-05-17T18:58:42.943Z","updatedAt":"2021-05-17T18:58:42.943Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - editing render tree","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"6Wh81hnLqXc4rR6sc1DMdy","type":"Asset","createdAt":"2021-05-17T18:58:38.007Z","updatedAt":"2021-05-17T18:58:38.007Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - editing render tree","file":{"url":"//images.ctfassets.net/spoqsaf9291f/6Wh81hnLqXc4rR6sc1DMdy/5e3dca2c349f2744abf7e6b51fdb983b/blocks-5.png","details":{"size":26167,"image":{"width":1400,"height":714}},"fileName":"blocks-5.png","contentType":"image/png"}}},"description":"An illustration depicting how Notion’s render tree works.","presentation":"Border","hideCaption":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Most of the time, indenting works like it would in a traditional document editor — the currently-selected block will move into the content array of the preceding block, and will be rendered indented within. However, when the preceding block isn’t a list (or there’s no previous block at all), indenting will have no effect because there is nowhere to move the block into. The visual representation of a document in Notion reflects the structure of the information it contains.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Permissions","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"So far, we’ve explained how blocks come together to organize and structure your information. It’s also important to understand how this structure protects your information so only the right people can read it or change it.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Blocks inherit permissions based on the blocks in which they’re located (which are above them in the tree). Consider a page — to read its contents, you must be able to read the blocks within that page. However, there are two reasons we can’t use the content array to build this permissions system:","marks":[],"data":{}}],"data":{}},{"nodeType":"ordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Initially, we allowed blocks to be referenced by multiple content arrays to simplify our collaboration and concurrency model. But because a block can be referenced in multiple places, it’s ambiguous which block it would inherit permissions from. And ambiguity is unacceptable in a permissions system.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The second reason is mechanical. To implement permission checks for a block, we need to look up the tree, getting that block’s ancestors all the way up to the root of the tree (which is the workspace). Trying to find this ancestor path by searching through all blocks’ content arrays is inefficient, especially on the client.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7m7R3QN73xQTHwtpzlpVHj","type":"Entry","createdAt":"2021-05-17T19:02:33.147Z","updatedAt":"2021-05-17T19:02:33.147Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - permissions","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"4yBsfHMOfdyRCkAvR6sxvO","type":"Asset","createdAt":"2021-05-17T19:02:26.587Z","updatedAt":"2021-05-17T19:02:26.587Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - permissions","file":{"url":"//images.ctfassets.net/spoqsaf9291f/4yBsfHMOfdyRCkAvR6sxvO/506e5508de64a128f28e98fc5f8605b1/blocks-4.png","details":{"size":44839,"image":{"width":1400,"height":544}},"fileName":"blocks-4.png","contentType":"image/png"}}},"description":"A visual representation of how permissions work in Notion.","presentation":"Border","hideCaption":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Instead, we use an “upward pointer” — the parent attribute — for the permission system. The upward parent pointers, and the downward content pointers mirror each other (outside of a few edge cases we’re working to clean up). ","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"ANDcvoB1sj928Y2cqRoBP","type":"Entry","createdAt":"2021-05-17T19:04:09.128Z","updatedAt":"2021-05-17T19:04:09.128Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - page permissions","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5lPxIKCJ1F7NClz0j3gvd0","type":"Asset","createdAt":"2021-05-17T19:04:04.001Z","updatedAt":"2021-05-17T19:04:04.001Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - page permissions","file":{"url":"//images.ctfassets.net/spoqsaf9291f/5lPxIKCJ1F7NClz0j3gvd0/a687d29f8c43f1d5197a065cce696691/blocks-6.png","details":{"size":35122,"image":{"width":1400,"height":1082}},"fileName":"blocks-6.png","contentType":"image/png"}}},"description":"How content and parent relationships work in Notion.","presentation":"Border","hideCaption":true}}}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Life of a block","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"A block’s life starts on the client.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"When you take an action in the UI — typing in the editor, dragging blocks around a page — these changes are expressed as operations that create or update a single record. Our team refers to “records” as any kind of persisted data in Notion, like blocks, users, workspaces, etc. And because many actions usually change more than one record, operations are batched into transactions that are committed (or rejected) by the server as a group.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Let’s say you're working inside a page with a friend, both on separate computers editing a to-do list. What happens behind the scenes?","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Creating and updating blocks","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"You press enter — this creates a new ","marks":[],"data":{}},{"nodeType":"text","value":"To-do","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" block.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"First, the client defines all the initial attributes of the block, generating a new unique ID, setting the appropriate block type (","marks":[],"data":{}},{"nodeType":"text","value":"to_do","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":"), and filling in the block’s properties (an empty ","marks":[],"data":{}},{"nodeType":"text","value":"title","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", and ","marks":[],"data":{}},{"nodeType":"text","value":"checked: [[\"No\"]]","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":"). It builds operations to represent the creation of a new block with those attributes.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7MnetNevLE3ZWI9TQ3QnEl","type":"Entry","createdAt":"2021-05-17T19:06:55.203Z","updatedAt":"2021-05-17T19:06:55.203Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - making a block","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"4fh7exDYKjrImUsCMqY0cN","type":"Asset","createdAt":"2021-05-17T19:06:47.778Z","updatedAt":"2021-05-17T19:06:47.778Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - making a block","file":{"url":"//videos.ctfassets.net/spoqsaf9291f/4fh7exDYKjrImUsCMqY0cN/c7c96766162450503f244f14a96bf63e/making_to_do_list_block.mp4","details":{"size":156553},"fileName":"making_to_do_list_block.mp4","contentType":"video/mp4"}}},"description":"Making a to-do list block in Notion.","presentation":"Desktop App","hideCaption":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"New blocks are not created in isolation: blocks are also added to their parent’s content array, so they’re in the right position in the content tree. So, the client also generates an operation to do so. All these individual change operations are grouped into a transaction.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Then, the client applies the operations in the transaction to its local state. New block objects are created in-memory and existing blocks are modified. On our native apps, we cache all records you access locally in an LRU (least recently used) cache on top of ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"SQLite","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/blog/faster-page-load-navigation"}},{"nodeType":"text","value":" or IndexedDB called RecordCache. When you change records on a native app, we also update the local copies in RecordCache. The editor re-renders to draw the newly created block onto your screen. This happens within a few milliseconds of your keypress.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"At the same time, the transaction is saved into TransactionQueue, the part of the client responsible for sending all transactions to Notion’s servers so your data is persisted and shared with collaborators. TransactionQueue stores transactions safely in IndexedDB or SQLite (depending on platform) until they’re persisted by the server or rejected.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Saving changes on the server","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Here’s how your block ends up saved safely on the server, so your friend can see it.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Usually, TransactionQueue sits empty, so the transaction to create the block is sent to Notion’s server right away in an API request. The transaction data is serialized to JSON and posted to the ","marks":[],"data":{}},{"nodeType":"text","value":"/saveTransactions","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" API endpoint.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"SaveTransaction’s main job is to get your data into our source-of-truth databases, which store all block data, as well as all other kinds of persisted records in Notion.","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"vLm2y18xshg7Zrbu3husR","type":"Entry","createdAt":"2021-05-17T19:09:11.378Z","updatedAt":"2021-05-17T19:09:11.378Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - collaborating on a page","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5ROAtL8Ugn1UKlrvzxI5TB","type":"Asset","createdAt":"2021-05-17T19:08:50.185Z","updatedAt":"2021-05-17T19:08:50.185Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - collaborating on a page","file":{"url":"//videos.ctfassets.net/spoqsaf9291f/5ROAtL8Ugn1UKlrvzxI5TB/b314be0aae1d384bb30172cf770bec74/pack_socks.mp4","details":{"size":37972},"fileName":"pack_socks.mp4","contentType":"video/mp4"}}},"description":"Two people working together in a page. ","presentation":"Desktop App","hideCaption":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Once the request reaches the Notion API server:","marks":[],"data":{}}],"data":{}},{"nodeType":"ordered-list","content":[{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We load all the blocks and parents involved in the transaction. This gives us a “before” picture in memory. For this example, remember that we’re creating a block. So we need to, at least, load the page block so that we can insert the newly created block’s ID into the page’s content array.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We duplicate the “before” data that had just been loaded in memory. Then, we apply the operations in the transaction to the new copy to create the “after” data.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Then we use both “before” and “after” data to validate the changes for permissions and data coherency. If everything checks out (it usually does), all created or changed records are committed to the database — meaning your block has now officially been created.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"At this point, there’s a “success” HTTP response to the original API request that had been sent by your client. This confirms your client knows the transaction was saved successfully and that it can move onto saving the next transaction in the TransactionQueue.","marks":[],"data":{}}],"data":{}}],"data":{}},{"nodeType":"list-item","content":[{"nodeType":"paragraph","content":[{"nodeType":"text","value":"In the background, we schedule additional work depending on the kind of change made for your transaction. For example, we schedule ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"version history","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/Version-history-eec3af1f5bc64ba0a712ee5794e12a9c"}},{"nodeType":"text","value":" snapshots and indexing block text for ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"Quick Find","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/Searching-with-Quick-Find-af945b6e69b64437afba2d143e4b546f"}},{"nodeType":"text","value":". Importantly, we also notify MessageStore — Notion's real-time updates service — about the changes you made.","marks":[],"data":{}}],"data":{}}],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We’ll cover how the data gets to your friend’s screen in the next section.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Real-time updates","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"You pressed enter, created a new block, and now your block shows up on your friend’s screen. How does that work?","marks":[],"data":{}}],"data":{}},{"nodeType":"embedded-entry-block","content":[],"data":{"target":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5H9OPoZFvLWDqQ6676Bql5","type":"Entry","createdAt":"2021-05-17T19:12:14.962Z","updatedAt":"2021-05-17T19:12:14.962Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"mediaWithCaption"}},"locale":"en-US"},"fields":{"title":"Technical architecture - two people working in a list","media":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7r9ANtb6o6r4LoH8oJEBxD","type":"Asset","createdAt":"2021-05-17T19:12:11.026Z","updatedAt":"2021-05-17T19:12:11.026Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"Technical architecture - two people working in a list","file":{"url":"//videos.ctfassets.net/spoqsaf9291f/7r9ANtb6o6r4LoH8oJEBxD/8cd228c334bfdb6bd3bb06359e64e66f/two_people_in_list.mp4","details":{"size":106642},"fileName":"two_people_in_list.mp4","contentType":"video/mp4"}}},"description":"Two people adding items to a to-do list in Notion from separate computers.","presentation":"Desktop App","hideCaption":true}}}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Every client has a long-lived WebSocket connection to MessageStore, Notion’s real-time updates service. When the Notion client renders a block (or page, or any other kind of record), the client subscribes to changes of that record from MessageStore using this WebSocket connection. When your friend opens the same page as you, they’re subscribed to changes of all those blocks.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"After your changes made it through the saveTransactions process, the API notified MessageStore of new recorded versions. MessageStore finds client connections subscribed to those changing records, and passes on the new version to them through their WebSocket connection.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"When your friend’s client receives version update notifications from MessageStore, it verifies that version of the block in its local cache. Because the versions from the notification and the local block are different, it sends a ","marks":[],"data":{}},{"nodeType":"text","value":"syncRecordValues","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" API request to the sever with the list of outdated client records. The server responds with the new record data. The client uses this response data to update the local cache with the new version of the records, then re-renders the UI to display the latest block data.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-3","content":[{"nodeType":"text","value":"Reading blocks","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Your friend takes a nap, but you continue working on the to-do list. To let them know you’ve made some changes to the list, you send them a link to the Notion page you’ve both been working in.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"In the first few milliseconds after your friend wakes up and clicks the link, we first try to load that page using only local data. On web, this means block data that’s in-memory. On our native apps, we try loading blocks that aren’t in memory from the RecordCache persisted storage. But if we need block data that’s missing, we stop and request the page data from the API instead.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"The API method for loading the data for a page is called ","marks":[],"data":{}},{"nodeType":"text","value":"loadPageChunk","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" — it descends from a starting point (likely the block ID of a page block) down the content tree, and returns the blocks in the content tree plus any dependent records needed to properly render those blocks. We use several layers of caching for ","marks":[],"data":{}},{"nodeType":"text","value":"loadPageChunk","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":", but in the worst case, this API might need many trips to the database as it recursively crawls down the tree to chase down blocks and their record dependencies.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"All data loaded by ","marks":[],"data":{}},{"nodeType":"text","value":"loadPageChunk","marks":[{"type":"code"}],"data":{}},{"nodeType":"text","value":" is put into memory (and saved in the RecordCache if you’re using the app). Once the data is in memory, we lay out the page and render it using React.","marks":[],"data":{}}],"data":{}},{"nodeType":"heading-2","content":[{"nodeType":"text","value":"Building blocks for what’s next","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Blocks are the most foundational component of Notion’s mission to empower any person or business to tailor software to their problems. This architecture sets a path for Notion’s future — new block types, automations (","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"like the API","marks":[],"data":{}}],"data":{"uri":"http://developers.notion.so"}},{"nodeType":"text","value":"), workflows, and functionality that enables you to create even more powerful tools.","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"Still, we know there’s a lot of room to grow Notion the product, improving things like efficiency, performance, offline, and block-specific quirks in the editor. What you see when you’re using Notion is only the part of the iceberg that’s above the surface. After reading this, we hope you understand a bit of what’s underneath. ","marks":[],"data":{}}],"data":{}},{"nodeType":"paragraph","content":[{"nodeType":"text","value":"We’re ","marks":[],"data":{}},{"nodeType":"hyperlink","content":[{"nodeType":"text","value":"looking for help","marks":[],"data":{}}],"data":{"uri":"https://www.notion.so/careers"}},{"nodeType":"text","value":" to build the future of Notion. Is that you?","marks":[],"data":{}}],"data":{}}]}}}],"postTopics":[{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5fBleQPwPVEQHmNv3bCt0q","type":"Entry","createdAt":"2021-05-17T19:44:24.367Z","updatedAt":"2021-07-09T18:01:49.395Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"postTopic"}},"locale":"en-US"},"fields":{"title":"Tech","slug":"tech","description":"How we’re building Notion, block by block.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5eeQ1CWX51pw9WGoLFnLuS","type":"Asset","createdAt":"2021-05-17T19:35:55.048Z","updatedAt":"2021-05-17T19:35:55.048Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"blog-topic-tech","file":{"url":"//images.ctfassets.net/spoqsaf9291f/5eeQ1CWX51pw9WGoLFnLuS/1b195b7d9823e953f5de226eee289588/blog-topic-tech.png","details":{"size":9882,"image":{"width":200,"height":150}},"fileName":"blog-topic-tech.png","contentType":"image/png"}}},"order":3}},{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7GpSwSJSQ1kro7xH7NlDjq","type":"Entry","createdAt":"2021-05-19T18:22:19.497Z","updatedAt":"2021-07-09T18:01:49.376Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":6,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"postTopic"}},"locale":"en-US"},"fields":{"title":"Inspiration ✨","slug":"inspiration","description":"Stories about remarkable people and the tools they build.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"3pEkFO0YiXaRNEy3eevF6O","type":"Asset","createdAt":"2021-04-29T02:30:52.748Z","updatedAt":"2021-05-19T18:21:00.128Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":8,"locale":"en-US"},"fields":{"title":"blog-topic-inspiration","file":{"url":"//images.ctfassets.net/spoqsaf9291f/3pEkFO0YiXaRNEy3eevF6O/69fdce112f221f24fd365949ca975a02/blog-topic-inspiration_1__6_.png","details":{"size":14562,"image":{"width":200,"height":150}},"fileName":"blog-topic-inspiration 1 (6).png","contentType":"image/png"}}},"textWidth":320,"order":5}},{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"7spoCPe6XsZzJ2FMpQ86zj","type":"Entry","createdAt":"2021-02-09T21:07:25.508Z","updatedAt":"2021-07-09T18:01:49.358Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":6,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"postTopic"}},"locale":"en-US"},"fields":{"title":"Pioneers","slug":"pioneers","description":"Conversations with the minds that shaped computing.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"39VmE4AlgjTzsBrsDZKqSX","type":"Asset","createdAt":"2021-02-26T00:39:24.924Z","updatedAt":"2021-02-26T01:27:13.666Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"locale":"en-US"},"fields":{"title":"blog-topic-icon-pioneers","file":{"url":"//images.ctfassets.net/spoqsaf9291f/39VmE4AlgjTzsBrsDZKqSX/a0a028cfe863a829850823ef397d688c/blog-topic-icon-pioneers.png","details":{"size":6026,"image":{"width":200,"height":150}},"fileName":"blog-topic-icon-pioneers.png","contentType":"image/png"}}},"order":4}},{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"OOaiuTVjdxFZBOoIdqsxI","type":"Entry","createdAt":"2021-02-09T21:01:31.992Z","updatedAt":"2021-07-09T18:01:49.344Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":9,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"postTopic"}},"locale":"en-US"},"fields":{"title":"Notion HQ","slug":"notion-hq","description":"What’s top of mind for us right now.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"4zRKGSwikyk45ex4z0f3y","type":"Asset","createdAt":"2021-02-26T00:00:51.849Z","updatedAt":"2021-02-26T01:27:46.256Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":3,"locale":"en-US"},"fields":{"title":"blog-topic-icon-notion-hq","file":{"url":"//images.ctfassets.net/spoqsaf9291f/4zRKGSwikyk45ex4z0f3y/7511a83e852091b34e2de40b96d4f31c/blog-topic-icon-notion-hq.png","details":{"size":6646,"image":{"width":200,"height":150}},"fileName":"blog-topic-icon-notion-hq.png","contentType":"image/png"}}},"textWidth":200,"order":1}},{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5Pdr4ZqsNKNllf08rDFLI1","type":"Entry","createdAt":"2021-02-11T19:40:01.957Z","updatedAt":"2021-07-09T18:00:56.693Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":10,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"postTopic"}},"locale":"en-US"},"fields":{"title":"For Teams","slug":"for-teams","description":"Ideas to help you work better, together.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"4wBipWK4zog7ur9Cs2LBBN","type":"Asset","createdAt":"2021-02-26T00:38:13.579Z","updatedAt":"2021-06-03T16:32:56.637Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":5,"locale":"en-US"},"fields":{"title":"blog-topic-icon-for-teams","file":{"url":"//images.ctfassets.net/spoqsaf9291f/4wBipWK4zog7ur9Cs2LBBN/b7fb862d74165b1963616843cfc0edf6/blog-topic-icon-for-teams_1.png","details":{"size":7003,"image":{"width":200,"height":150}},"fileName":"blog-topic-icon-for-teams 1.png","contentType":"image/png"}}},"textWidth":200,"order":2}}],"currentTopic":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5fBleQPwPVEQHmNv3bCt0q","type":"Entry","createdAt":"2021-05-17T19:44:24.367Z","updatedAt":"2021-07-09T18:01:49.395Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":4,"contentType":{"sys":{"type":"Link","linkType":"ContentType","id":"postTopic"}},"locale":"en-US"},"fields":{"title":"Tech","slug":"tech","description":"How we’re building Notion, block by block.","image":{"metadata":{"tags":[]},"sys":{"space":{"sys":{"type":"Link","linkType":"Space","id":"spoqsaf9291f"}},"id":"5eeQ1CWX51pw9WGoLFnLuS","type":"Asset","createdAt":"2021-05-17T19:35:55.048Z","updatedAt":"2021-05-17T19:35:55.048Z","environment":{"sys":{"id":"master","type":"Link","linkType":"Environment"}},"revision":1,"locale":"en-US"},"fields":{"title":"blog-topic-tech","file":{"url":"//images.ctfassets.net/spoqsaf9291f/5eeQ1CWX51pw9WGoLFnLuS/1b195b7d9823e953f5de226eee289588/blog-topic-tech.png","details":{"size":9882,"image":{"width":200,"height":150}},"fileName":"blog-topic-tech.png","contentType":"image/png"}}},"order":3}},"preview":false},"__N_SSG":true},"page":"/blog/topic/[slug]","query":{"slug":"tech"},"buildId":"SjKVBKupigi5kngKlGmy6","nextExport":false,"isFallback":false,"gsp":true,"locale":"en-us","locales":["en-us","es-es","es-la","fr-fr","ja-jp","ko","ko-kr","pt-br","zh-cn","zh-tw"],"defaultLocale":"en-us"}</script><script nomodule="" src="/_next/static/chunks/polyfills-06d31ffa4dce26d67aef.js"></script><script src="/_next/static/chunks/main-8ed4068f96dc9dbe6c2d.js" async=""></script><script src="/_next/static/chunks/webpack-c3aa649bbfdf2d5f92a0.js" async=""></script><script src="/_next/static/chunks/framework.2cf68ac8b1972a03b3ba.js" async=""></script><script src="/_next/static/chunks/29107295.6045c0a9516464b26d84.js" async=""></script><script src="/_next/static/chunks/e0d0f1b753050c5d917fc63db1008be9d0b449aa.9242e374fd2eca02c1da.js" async=""></script><script src="/_next/static/chunks/a20e14042bf01bb73cc40ad9bd980461497ba4ce.62c56ddeaa9e1128b4e5.js" async=""></script><script src="/_next/static/chunks/pages/_app-8ce90d6174db80621e41.js" async=""></script><script src="/_next/static/chunks/3df368aa2cf5ff8908bc537c8341a4f4fd69b0dd.cc994fc4e0f0ea6c659a.js" async=""></script><script src="/_next/static/chunks/9208b6df9dc976eb73d2eecfcc27cadd08debe5b.d54c4817eba9f8f1b939.js" async=""></script><script src="/_next/static/chunks/a929b2e45c7fe2a0448d6d6713bdea38db79da6d.8044263e043049507c20.js" async=""></script><script src="/_next/static/chunks/ae1f24238381916de49cc8167386fbc3308154a3.727fb78bb2b83663d772.js" async=""></script><script src="/_next/static/chunks/pages/blog/topic/%5Bslug%5D-e9ca31371913aea849e9.js" async=""></script><script src="/_next/static/SjKVBKupigi5kngKlGmy6/_buildManifest.js" async=""></script><script src="/_next/static/SjKVBKupigi5kngKlGmy6/_ssgManifest.js" async=""></script></body></html>